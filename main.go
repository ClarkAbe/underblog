package main

import (
	"fmt"
	"underblog/cmd"
	"underblog/internal"
	"path/filepath"
	"encoding/base64"
	"io/ioutil"
	"log"
	"os"
	"time"
)


var revision = "0.2.2"

func MkdirExistDir(v []string) (bool) {
	for _, path := range v {
		path, _ = filepath.Abs(path)
		if _, err := os.Stat(path); err != nil { // 检查路径是否存在
			if os.MkdirAll(path, os.ModePerm) != nil {
				return false
			}
		}
	}
	return true
}

func b64d(enc string)(string){
	decodeBytes, err := base64.StdEncoding.DecodeString(enc)
	if err != nil {
		return "base64 decode error!"
	}
	return string(decodeBytes)
}

func IsExist(path string)(bool){
	path, _ = filepath.Abs(path)
	_, err := os.Stat(path)
	return err != nil
}

func MkExistFile(v map[string]string) (o bool) {
	o = true
	for path, data := range v {
		path, _ = filepath.Abs(path)
		if _, err := os.Stat(path); err != nil {
			if ioutil.WriteFile(path, []byte(data), os.ModePerm) != nil {
				o = false
			}
		}
	}
	return o
}

func main() {
	fmt.Printf("Underblog %s\n", revision)
	MkdirExistDir([]string{"./src/markdown", "./src/static/js", "./src/static/css", "./src/static/images"})
	if IsExist("./src") {
		MkExistFile(map[string]string{
			"./src/index.html":b64d("CjwhRE9DVFlQRSBodG1sPgo8aHRtbD48aGVhZD4KICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04Ij4KICAgIDxtZXRhIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPTAiIG5hbWU9InZpZXdwb3J0Ij4KICAgIDxtZXRhIGNvbnRlbnQ9InllcyIgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtY2FwYWJsZSI+CiAgICA8bWV0YSBjb250ZW50PSJibGFjayIgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtc3RhdHVzLWJhci1zdHlsZSI+CiAgICA8bWV0YSBodHRwLWVxdWl2PSJDYWNoZS1Db250cm9sIiBjb250ZW50PSJuby10cmFuc2Zvcm0iPgogICAgPG1ldGEgaHR0cC1lcXVpdj0iQ2FjaGUtQ29udHJvbCIgY29udGVudD0ibm8tc2l0ZWFwcCI+CiAgICA8bWV0YSBjb250ZW50PSJ0ZWxlcGhvbmU9bm8iIG5hbWU9ImZvcm1hdC1kZXRlY3Rpb24iPgogICAgPGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiBocmVmPSIvc3RhdGljL2ltYWdlcy9waWMucG5nIiB0eXBlPSJpbWFnZS9wbmciLz4KICAgIDxtZXRhIG5hbWU9InJlbmRlcmVyIiBjb250ZW50PSJ3ZWJraXQiPgogICAgPG1ldGEgbmFtZT0ia2V5d29yZHMiIGNvbnRlbnQ9IkFyY2hMaW51eCwgQ2xhcmtRQVEsIOS4quS6uuWNmuWuoiwgQmxvZywgQ29kZSI+Cgk8bGluayByZWw9ImNhbm9uaWNhbCIgaHJlZj0ie3sgQmxvZ0xpbmsgYGh0dHA6Ly9leGFtcGxlLmNvbWAgfX0iPgoJPG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9Int7IEJsb2dEZXNjcmlwdGlvbiBgQmxvZyBhYm91dCB1bmRlcmJsb2dgIH19Ij4KICAgIDx0aXRsZT57eyBCbG9nVGl0bGUgIkNsYXJrJ3MgQmxvZyIgfX08L3RpdGxlPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvc3RhdGljL2Nzcy9zdHlsZS5jc3MiPgo8L2hlYWQ+Cjxib2R5Pgo8ZGl2IGNsYXNzPSJ3cmFwcGVyIj4KICAgIDxoZWFkZXI+CiAgICAgICAgPGEgaHJlZj0iLyIgY2xhc3M9ImxvZ28iPjxpbWcgc3JjPSIvc3RhdGljL2ltYWdlcy91c2VyLWhlYWQtaW1hZ2UucG5nIiBhbHQ9IkNsYXJrJ3MgQmxvZyI+PC9hPgogICAgICAgIDxkaXYgY2xhc3M9ImRlc2NyaXB0aW9uIj4KICAgICAgICAgICAgPGgxPkNsYXJrJ3MgQmxvZzwvaDE+CiAgICAgICAgICAgIDxoMj7lnKjkuIDkuKrpmLPlhYnmmI7lqprnmoTljYjlkI4s56qB54S25raI5aSxLOawuOi/nOa2iOWksS48L2gyPgogICAgICAgICAgICA8bmF2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYml0Y3Jvbl9uYXZfY29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiaXRjcm9uX25hdiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1peGVkX3NpdGVfbmF2X3dyYXAgc2l0ZV9uYXZfd3JhcCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Im1peGVkX3NpdGVfbmF2IHNpdGVfbmF2IHNtIHNtLWJhc2UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPSIvIiBjbGFzcz0ic2VsZWN0ZWQgYWN0aXZlIGN1cnJlbnQgbmF2X19pdGVtIj7pppbpobU8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KPCEtLQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPSJodHRwOi8vMTI3LjAuMC4xOjgwODAvYXJjaGl2ZSIgY2xhc3M9IiBuYXZfX2l0ZW0iPuW9kuahozwvYT48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPSJodHRwOi8vMTI3LjAuMC4xOjgwODAvYWRtaW4iIGNsYXNzPSIgbmF2X19pdGVtIj7nrqHnkIY8L2E+PC9saT4KLS0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2xlYXIgY2xlYXJfbmF2X2lubGluZV9lbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNsZWFyIGNsZWFyX25hdl9lbmQiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvbmF2PgogICAgICAgIDwvZGl2PgogICAgPC9oZWFkZXI+CgogICAgPG1haW4+CiAgICA8c2VjdGlvbiBjbGFzcz0iYXJ0aWNsZS1saXN0Ij4KCXt7IHJhbmdlIC4gfX0KICAgICAgICA8YXJ0aWNsZT4KICAgICAgICAgICAgPGgyPgogICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Ii9wb3N0cy97eyAuU2x1ZyB9fS8iPnt7IC5UaXRsZSB9fTwvYT4KICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhjZXJwdCI+CiAgICAgICAgICAgICAgICA8cD48L3A+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtZXRhIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpdGVtIj7ml6XmnJ86PC9pPjx0aW1lPnt7IC5EYXRlLkZvcm1hdCAiMjAwNi0wMS0wMiIgfX08L3RpbWU+PC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2FydGljbGU+Cgl7eyBlbmQgfX0KICAgIDwvc2VjdGlvbj4KPC9tYWluPgo8L2Rpdj4KCgogICAgPGZvb3Rlcj4KICAgICAgICA8c3Bhbj5DbGFya1FBUSAtIOKZpTwvc3Bhbj4KICAgICAgICA8ZGl2PuWPi+aDhemTvuaOpToKICAgICAgICAgICAgIDxhIGhyZWY9Imh0dHA6Ly9ibG9nLmNsYXJhcXdxLmNvbS8iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0iQ2xhcmFRV1HnmoTljZrlrqIiPkNsYXJhPC9hPgoJCTwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InBvd2VyZWRfYnkiPgogICAgICAgICAgICA8c3Bhbj7CqSBDb3B5UmlnaHQ8L3NwYW4+CiAgICAgICAgICAgIDxhIGhyZWY9Imh0dHA6Ly9jbGFya2FiZS50b3AvIiB0YXJnZXQ9Il9ibGFuayI+Q2xhcmtRQVE8L2E+CiAgICAgICAgICAgIDxhIGhyZWY9IiMiIHRhcmdldD0iX2JsYW5rIj5GYW50YXN5PC9hPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlcl9zbG9nYW4iPgogICAgICAgIDwvZGl2PgogICAgPC9mb290ZXI+CiAgICA8c2NyaXB0PgoJCShmdW5jdGlvbigpIHsKCQkJdmFyIE9yaWdpblRpdGxlID0gZG9jdW1lbnQudGl0bGU7CgkJCXZhciB0aXRsZVRpbWU7CgkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CgkJCQlpZiAoZG9jdW1lbnQuaGlkZGVuKSB7CgkJCQkJZG9jdW1lbnQudGl0bGUgPSAi5ZaU5ZS3LOW0qea6g+WVpiEiOwoJCQkJCWNsZWFyVGltZW91dCh0aXRsZVRpbWUpOwoJCQkJfWVsc2UgewoJCQkJCWRvY3VtZW50LnRpdGxlID0gIuivtiE9dz3lj4jlpb3kuoYhIjsKCQkJCQl0aXRsZVRpbWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKCQkJCQkJZG9jdW1lbnQudGl0bGUgPSBPcmlnaW5UaXRsZTsKCQkJCQl9LCAyMDAwKTsKCQkJCX0KCQkJfSk7CgkJIH0oKSk7CiAgICA8L3NjcmlwdD4KCjwvYm9keT4="),
			"./src/post.html":b64d("CjwhRE9DVFlQRSBodG1sPgo8aHRtbD4KPGhlYWQ+CiAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+CiAgICA8bWV0YSBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT0wIiBuYW1lPSJ2aWV3cG9ydCIvPgogICAgPG1ldGEgY29udGVudD0ieWVzIiBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlIi8+CiAgICA8bWV0YSBjb250ZW50PSJibGFjayIgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtc3RhdHVzLWJhci1zdHlsZSIvPgogICAgPG1ldGEgaHR0cC1lcXVpdj0iQ2FjaGUtQ29udHJvbCIgY29udGVudD0ibm8tdHJhbnNmb3JtIi8+CiAgICA8bWV0YSBodHRwLWVxdWl2PSJDYWNoZS1Db250cm9sIiBjb250ZW50PSJuby1zaXRlYXBwIi8+CiAgICA8bWV0YSBjb250ZW50PSJ0ZWxlcGhvbmU9bm8iIG5hbWU9ImZvcm1hdC1kZXRlY3Rpb24iLz4KICAgIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgaHJlZj0iL3N0YXRpYy9pbWFnZXMvcGljLnBuZyIgdHlwZT0iaW1hZ2UvcG5nIi8+CiAgICA8bWV0YSBuYW1lPSJyZW5kZXJlciIgY29udGVudD0id2Via2l0Ij4KICAgIDxtZXRhIG5hbWU9ImRlc2NyaXB0aW9uIiBjb250ZW50PSIiPgogICAgPG1ldGEgbmFtZT0ia2V5d29yZHMiIGNvbnRlbnQ9IkFyY2hMaW51eCwgQ2xhcmtRQVEsIOS4quS6uuWNmuWuoiwgQmxvZywgQ29kZSI+CiAgICA8dGl0bGU+e3sgLlRpdGxlIH19IC0gQ2xhcmsmIzM5O3MgQmxvZzwvdGl0bGU+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9zdGF0aWMvY3NzL3N0eWxlLmNzcyI+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9zdGF0aWMvY3NzL3N0cmFwZG93bi5jc3MiPgo8L2hlYWQ+Cjxib2R5Pgo8ZGl2IGNsYXNzPSJ3cmFwcGVyIj4KICAgIDxoZWFkZXI+CiAgICAgICAgPGEgaHJlZj0iLyIgY2xhc3M9ImxvZ28iPjxpbWcgc3JjPSIvc3RhdGljL2ltYWdlcy91c2VyLWhlYWQtaW1hZ2UucG5nIiBhbHQ9IkNsYXJrJiMzOTtzIEJsb2ciLz48L2E+CiAgICAgICAgPGRpdiBjbGFzcz0iZGVzY3JpcHRpb24iPgogICAgICAgICAgICA8aDE+Q2xhcmsmIzM5O3MgQmxvZzwvaDE+CiAgICAgICAgICAgIDxoMj7lnKjkuIDkuKrpmLPlhYnmmI7lqprnmoTljYjlkI4s56qB54S25raI5aSxLOawuOi/nOa2iOWksS48L2gyPgogICAgICAgICAgICA8bmF2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYml0Y3Jvbl9uYXZfY29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiaXRjcm9uX25hdiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1peGVkX3NpdGVfbmF2X3dyYXAgc2l0ZV9uYXZfd3JhcCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Im1peGVkX3NpdGVfbmF2IHNpdGVfbmF2IHNtIHNtLWJhc2UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPSIvIiBjbGFzcz0ic2VsZWN0ZWQgYWN0aXZlIGN1cnJlbnQgbmF2X19pdGVtIj7pppbpobU8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KPCEtLQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPSIvYXJjaGl2ZSIgY2xhc3M9IiBuYXZfX2l0ZW0iPuW9kuahozwvYT48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPSIvYWRtaW4iIGNsYXNzPSIgbmF2X19pdGVtIj7nrqHnkIY8L2E+PC9saT4KLS0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2xlYXIgY2xlYXJfbmF2X2lubGluZV9lbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNsZWFyIGNsZWFyX25hdl9lbmQiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvbmF2PgogICAgICAgIDwvZGl2PgogICAgPC9oZWFkZXI+CgogICAgPG1haW4+CjxhcnRpY2xlIGNsYXNzPSJjb250ZW50Ij4KCiAgICA8aDE+e3sgLlRpdGxlIH19PC9oMT4KICAgIDxkaXYgY2xhc3M9Im1ldGEiPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0iaXRlbSI+5pel5pyfOjx0aW1lPnt7IC5EYXRlLkZvcm1hdCAiMjAwNi0wMS0wMiIgfX08L3RpbWU+PC9zcGFuPgogICAgICAgIDxzcGFuIGNsYXNzPSJpdGVtIj7moIfnrb466buY6K6kKOacquWunueOsCk8L3NwYW4+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InBvc3QiPgogICAgICAgIDxkaXYgY2xhc3M9Im1kX2Jsb2NrIiBpZD0ibWFya2Rvd24iPgoKICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2FydGljbGU+CiAgICA8c2NyaXB0IHNyYz0iL3N0YXRpYy9qcy9zdHJhcGRvd24uanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFya2Rvd24iKS5pbm5lckhUTUwgPSAie3sgLkJvZHkgfX0iOwoJCW1hcmtkb3duKCJtYXJrZG93biIpOwoJPC9zY3JpcHQ+CjwvbWFpbj4KPC9kaXY+CiAgICA8Zm9vdGVyPgogICAgICAgIDxzcGFuPkNsYXJrUUFRIC0g4pmlPC9zcGFuPgogICAgICAgIDxkaXY+5Y+L5oOF6ZO+5o6lOgogICAgICAgIDxhIGhyZWY9Imh0dHA6Ly9ibG9nLmNsYXJhcXdxLmNvbS8iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0iQ2xhcmFRV1HnmoTljZrlrqIiPkNsYXJhPC9hPgoJCTwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InBvd2VyZWRfYnkiPgogICAgICAgICAgICA8c3Bhbj7CqSBDb3B5UmlnaHQ8L3NwYW4+CiAgICAgICAgICAgIDxhIGhyZWY9Imh0dHA6Ly9jbGFya2FiZS50b3AiIHRhcmdldD0iX2JsYW5rIj5DbGFya1FBUTwvYT4KICAgICAgICAgICAgPGEgaHJlZj0iIyIgdGFyZ2V0PSJfYmxhbmsiPkZhbnRhc3k8L2E+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyX3Nsb2dhbiI+CiAgICAgICAgPC9kaXY+CiAgICA8L2Zvb3Rlcj4KCiAgICA8c2NyaXB0PgoJCShmdW5jdGlvbigpIHsKCQkJdmFyIE9yaWdpblRpdGxlID0gZG9jdW1lbnQudGl0bGU7CgkJCXZhciB0aXRsZVRpbWU7CgkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CgkJCQlpZiAoZG9jdW1lbnQuaGlkZGVuKSB7CgkJCQkJZG9jdW1lbnQudGl0bGUgPSAi5ZaU5ZS3LOW0qea6g+WVpiEiOwoJCQkJCWNsZWFyVGltZW91dCh0aXRsZVRpbWUpOwoJCQkJfWVsc2UgewoJCQkJCWRvY3VtZW50LnRpdGxlID0gIuivtiE9dz3lj4jlpb3kuoYhIjsKCQkJCQl0aXRsZVRpbWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKCQkJCQkJZG9jdW1lbnQudGl0bGUgPSBPcmlnaW5UaXRsZTsKCQkJCQl9LCAyMDAwKTsKCQkJCX0KCQkJfSk7CgkJIH0oKSk7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"),
			"./src/static/css/style.css":b64d("QGNoYXJzZXQgIlVURi04IjsKYSxhYmJyLGFjcm9ueW0sYWRkcmVzcyxhcHBsZXQsYXJ0aWNsZSxhc2lkZSxhdWRpbyxiLGJpZyxibG9ja3F1b3RlLGJvZHksY2FudmFzLGNhcHRpb24sY2VudGVyLGNpdGUsY29kZSxkZCxkZWwsZGV0YWlscyxkZm4sZGl2LGRsLGR0LGVtLGVtYmVkLGZpZWxkc2V0LGZpZ2NhcHRpb24sZmlndXJlLGZvb3Rlcixmb3JtLGgxLGgyLGgzLGg0LGg1LGg2LGhlYWRlcixoZ3JvdXAsaHRtbCxpLGlmcmFtZSxpbWcsaW5zLGtiZCxsYWJlbCxsZWdlbmQsbGksbWFyayxtZW51LG5hdixvYmplY3Qsb2wsb3V0cHV0LHAscHJlLHEscnVieSxzLHNhbXAsc2VjdGlvbixzbWFsbCxzcGFuLHN0cmlrZSxzdHJvbmcsc3ViLHN1bW1hcnksc3VwLHRhYmxlLHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpbWUsdHIsdHQsdSx1bCx2YXIsdmlkZW8gewogbWFyZ2luOjA7CiBwYWRkaW5nOjA7CiBib3JkZXI6MDsKIGZvbnQtc2l6ZToxMDAlOwogZm9udDppbmhlcml0OwogdmVydGljYWwtYWxpZ246YmFzZWxpbmUKfQphcnRpY2xlLAphc2lkZSwKZGV0YWlscywKZmlnY2FwdGlvbiwKZmlndXJlLApmb290ZXIsCmhlYWRlciwKaGdyb3VwLAptZW51LApuYXYsCnNlY3Rpb24gewogZGlzcGxheTpibG9jawp9CmJvZHkgewogbGluZS1oZWlnaHQ6MQp9Cm9sLAp1bCB7CiBsaXN0LXN0eWxlOm5vbmU7CiBjb2xvcjojYmJiCn0KYmxvY2txdW90ZSwKcSB7CiBxdW90ZXM6bm9uZQp9CmJsb2NrcXVvdGU6YWZ0ZXIsCmJsb2NrcXVvdGU6YmVmb3JlLApxOmFmdGVyLApxOmJlZm9yZSB7CiBjb250ZW50OicnOwogY29udGVudDpub25lCn0KdGFibGUgewogYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOwogYm9yZGVyLXNwYWNpbmc6MAp9CmJvZHkgewogd2lkdGg6MTAwJTsKIG1hcmdpbjowIGF1dG87CiBjb2xvcjojMzMzOwogYmFja2dyb3VuZDojZjdmN2Y3OwogZm9udC1mYW1pbHk6J09wZW4gU2FucycsJ1BpbmdGYW5nIFNDJywnSGlyYWdpbm8gU2FucyBHQicsUGluZ0hlaSxzYW5zLXNlcmlmLEhlbHZldGljYSBOZXVlLCdXb3JrIFNhbnMnLCdNaWNyb3NvZnQgWWFIZWknLFNpbVN1bjsKIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7CiB0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7CiBsaW5lLWhlaWdodDoyZW07CiB0ZXh0LWFsaWduOmp1c3RpZnk7CiB3b3JkLXdyYXA6YnJlYWstd29yZAp9Ci53cmFwcGVyIHsKIG1heC13aWR0aDo4MjBweDsKIGJhY2tncm91bmQ6I2ZmZjsKIG1hcmdpbjowIGF1dG87CiBtYXJnaW4tdG9wOjYwcHg7CiBib3gtc2hhZG93OjAgMTBweCAyMHB4IDAgaHNsYSgwLDAlLDkzJSwuODYpOwogLXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNnMgZWFzZTsKIHRyYW5zaXRpb246YWxsIC42cyBlYXNlCn0KaDEsCmgyLApoMywKaDQsCmg1LApoNiB7CiBjb2xvcjojMWYxZjFmOwogZm9udC13ZWlnaHQ6NzAwOwogbWFyZ2luOjFlbSAwIC41ZW07CiBsaW5lLWhlaWdodDoxZW0KfQpoMSB7CiBmb250LXNpemU6MS44ZW07CiBtYXJnaW46MS41ZW0gMCAxZW0KfQpoMiB7CiBtYXJnaW46MWVtIDAgLjhlbQp9CmgyLApoMyB7CiBmb250LXNpemU6MS4yZW0KfQpoMyB7CiBtYXJnaW46MS4yZW0gMCAuOGVtCn0KaDQgewogZm9udC1zaXplOjEuMWVtCn0KYSB7CiB0ZXh0LWRlY29yYXRpb246bm9uZTsKIC13ZWJraXQtdHJhbnNpdGlvbjouNXM7CiB0cmFuc2l0aW9uOi41czsKIGNvbG9yOiM2YTViNWI7Cn0KYTpob3ZlciB7CiAvKiEgY29sb3I6IzU1NTsgKi8KfQpibG9ja3F1b3RlLApmaWd1cmUsCmhyLApvbCwKcCwKcHJlLAp0YWJsZSwKdWwgewogbWFyZ2luLWJvdHRvbToxZW0KfQpiLApzdHJvbmcgewogZm9udC13ZWlnaHQ6NzAwCn0KZW0sCml0YWxpYyB7CiBmb250LXN0eWxlOml0YWxpYwp9CmhyIHsKIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7CiBib3JkZXItdG9wOjA7CiBib3JkZXItbGVmdDowOwogYm9yZGVyLXJpZ2h0OjAKfQpibG9ja3F1b3RlIHsKIHBhZGRpbmc6MCA1MHB4IDFlbSA0MHB4OwogYm9yZGVyLWxlZnQ6MTBweCBzb2xpZCAjZGRkOwogYmFja2dyb3VuZDojZjdmN2Y3Cn0KYmxvY2txdW90ZTpiZWZvcmUgewogY29sb3I6I2RkZDsKIGNvbnRlbnQ6IuKAnCI7CiBmb250LXNpemU6NmVtOwogdmVydGljYWwtYWxpZ246LS40ZW07CiBtYXJnaW4tbGVmdDotMzNweDsKIGxpbmUtaGVpZ2h0OjAKfQp0YWJsZSB7CiBiYWNrZ3JvdW5kLWNvbG9yOiNmN2Y3Zjc7CiBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7CiBib3JkZXItc3BhY2luZzowOwogYm9yZGVyOjFweCBzb2xpZCAjZWVlOwogd2lkdGg6MTAwJTsKIHRhYmxlLWxheW91dDpmaXhlZDsKIHdvcmQtd3JhcDpicmVhay13b3JkCn0KdGQsCnRoIHsKIGJvcmRlci1sZWZ0OjFweCBzb2xpZCAjZWVlOwogcGFkZGluZzouNWVtIDFlbTsKIHZlcnRpY2FsLWFsaWduOm1pZGRsZTsKIGJvcmRlci10b3A6MXB4IHNvbGlkICNlZWUKfQp0aCB7CiBmb250LXdlaWdodDo3MDAKfQp0YWJsZSB0Ym9keT50cjpudGgtY2hpbGQob2RkKT50ZCwKdGFibGUgdGJvZHk+dHI6bnRoLWNoaWxkKG9kZCk+dGggewogYmFja2dyb3VuZC1jb2xvcjojZjlmOWY5Cn0KY29kZSB7CiBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkOwogYm9yZGVyLXJhZGl1czo0cHg7CiBwYWRkaW5nOi4xZW0gLjVlbQp9CmNvZGUsCnByZSB7CiBmb250LWZhbWlseTpjb25zb2xhcyxDb3VyaWVyLG1vbm9zcGFjZSxzYW5zLXNlcmlmOwogZm9udC1zaXplOi45ZW07CiBiYWNrZ3JvdW5kOiNmN2Y3ZjcKfQpwcmUgewogb3ZlcmZsb3c6YXV0bzsKIGxldHRlci1zcGFjaW5nOjA7CiB3aGl0ZS1zcGFjZTpwcmUtd3JhcDsKIHdvcmQtd3JhcDpicmVhay13b3JkOwogdGV4dC1hbGlnbjpsZWZ0OwogYm9yZGVyLXRvcDoxcHggc29saWQgI2VlZTsKIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7CiBwYWRkaW5nOjAgNSU7CiBwYWRkaW5nLXRvcDoxZW07CiBwYWRkaW5nLWJvdHRvbToxZW0KfQpwcmUgY29kZSB7CiBib3JkZXItYm90dG9tOjA7CiBwYWRkaW5nOjA7CiBmb250LXNpemU6aW5oZXJpdAp9CmNvZGUsCnByZSBwIHsKIG1hcmdpbjowCn0KcHJlIGJyIHsKIGRpc3BsYXk6bm9uZQp9CnN1cCB7CiB2ZXJ0aWNhbC1hbGlnbjpzdXBlcgp9CnN1YiB7CiB2ZXJ0aWNhbC1hbGlnbjpzdWIKfQpzdWIsCnN1cCB7CiBmb250LXNpemU6LjhlbTsKIGxpbmUtaGVpZ2h0OjAKfQp1bCB7CiBsaXN0LXN0eWxlOnNxdWFyZTsKIG1hcmdpbi1sZWZ0OjFlbQp9Cm9sIHsKIGxpc3Qtc3R5bGU6ZGVjaW1hbDsKIG1hcmdpbi1sZWZ0OjEuM2VtCn0KZGVsIHsKIG9wYWNpdHk6LjMKfQo6Oi1tb3otc2VsZWN0aW9uIHsKIGJhY2tncm91bmQ6IzAwMDsKIGNvbG9yOiNmZmYKfQo6OnNlbGVjdGlvbiB7CiBiYWNrZ3JvdW5kOiMwMDA7CiBjb2xvcjojZmZmCn0Kc2VjdGlvbi5zZWFyY2ggaW5wdXQgewogd2lkdGg6MTAwJTsKIGZvbnQtc2l6ZTouODc1ZW07CiBmb250LWZhbWlseTonT3BlbiBTYW5zJywnUGluZ0ZhbmcgU0MnLCdIaXJhZ2lubyBTYW5zIEdCJyxQaW5nSGVpLHNhbnMtc2VyaWYsSGVsdmV0aWNhIE5ldWUsJ1dvcmsgU2FucycsJ01pY3Jvc29mdCBZYUhlaScsU2ltU3VuOwogLXdlYmtpdC1mb250LXNtb290aGluZzphbnRpYWxpYXNlZDsKIHRleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTsKIG91dGxpbmU6MDsKIGRpc3BsYXk6aW5saW5lLWJsb2NrOwogYm9yZGVyLXRvcDowOwogYm9yZGVyLXJpZ2h0OjA7CiBib3JkZXItbGVmdDowOwogYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsKIHRleHQtYWxpZ246Y2VudGVyOwogcGFkZGluZzouOGVtIDA7CiBiYWNrZ3JvdW5kLWNvbG9yOiNmN2Y3Zjc7CiAtd2Via2l0LXRyYW5zaXRpb246LjVzOwogdHJhbnNpdGlvbjouNXMKfQpzZWN0aW9uLnNlYXJjaCBpbnB1dDpmb2N1cywKc2VjdGlvbi5zZWFyY2ggaW5wdXQ6aG92ZXIgewogYmFja2dyb3VuZC1jb2xvcjppbmhlcml0Cn0KLmNsZWFyIHsKIGNsZWFyOmJvdGgKfQpoZWFkZXIgewogbWFyZ2luOjAgYXV0bzsKIG1pbi1oZWlnaHQ6MTQwcHg7CiBwYWRkaW5nLWxlZnQ6NSU7CiBwYWRkaW5nLXJpZ2h0OjUlOwogcGFkZGluZy10b3A6NzVwdAp9CmhlYWRlciAubG9nbyB7CiBmbG9hdDpsZWZ0Cn0KaGVhZGVyIC5kZXNjcmlwdGlvbiB7CiBmbG9hdDpyaWdodAp9CmhlYWRlciBpbWcgewogd2lkdGg6NjVweDsKIGJvcmRlci1yYWRpdXM6NXB4Cn0KaGVhZGVyIGgxIHsKIGNvbG9yOiMzMzM7CiBmb250LXNpemU6MS44ZW07CiBtYXJnaW46LjVlbTsKIG1hcmdpbi1yaWdodDowOwogdGV4dC1hbGlnbjpyaWdodAp9CmhlYWRlciBoMiB7CiBmb250LXNpemU6LjhlbTsKIGNvbG9yOiM0YTNlM2U7CiBmb250LXdlaWdodDo0MDAKfQpoZWFkZXIgaDIsCm5hdiB7CiB0ZXh0LWFsaWduOnJpZ2h0Cn0KbmF2IHsKIHdpZHRoOjEwMCU7CiBtYXJnaW4tdG9wOjJlbQp9Cm5hdiB1bCB7CiBtYXJnaW4tbGVmdDowCn0KbmF2IHVsLApuYXYgdWwgbGkgewogZGlzcGxheTppbmxpbmUtYmxvY2s7CiBwYWRkaW5nLWxlZnQ6LjNlbQp9Cm5hdiB1bCBsaSBhIHsKIGZvbnQtc2l6ZTouOGVtOwogd2lkdGg6YXV0bzsKIGRpc3BsYXk6YmxvY2s7CiBwYWRkaW5nOi41ZW0gLjhlbTsKIGNvbG9yOiM5OTk7CiBsaW5lLWhlaWdodDoyZW07CiBib3JkZXItdG9wOjJweCBzb2xpZCAjOTM2YzgwOwp9Cm5hdiB1bCBsaSBhOmhvdmVyIHsKIGZvbnQtd2VpZ2h0OjcwMDsKIGNvbG9yOiNmMmQ2ZDY7CiBiYWNrZ3JvdW5kOiM5MzZiNmI7Cn0KYXJ0aWNsZSwKbWFpbiBzZWN0aW9uLmNvbnRlbnQgewogcGFkZGluZzowIDUlCn0KYXJ0aWNsZSBoMSwKbWFpbiBzZWN0aW9uLmNvbnRlbnQgaDEgewogbWFyZ2luLWJvdHRvbTouM2VtCn0KYXJ0aWNsZSAubWV0YSwKbWFpbiBzZWN0aW9uLmNvbnRlbnQgLm1ldGEgewogY29sb3I6IzNjMmEyYTsKIGZvbnQtc2l6ZTouOGVtOwogcGFkZGluZzoyMHB4IDAgNDBweAp9CmFydGljbGUgLm1ldGEgYSwKbWFpbiBzZWN0aW9uLmNvbnRlbnQgLm1ldGEgYSB7CiBtYXJnaW46MCAuM2VtCn0KYXJ0aWNsZSAubWV0YSAuaXRlbSwKbWFpbiBzZWN0aW9uLmNvbnRlbnQgLm1ldGEgLml0ZW0gewogbWFyZ2luLXJpZ2h0OjEwcHgKfQphcnRpY2xlIGgyIHNwYW4sCm1haW4gc2VjdGlvbi5jb250ZW50IGgyIHNwYW4gewogZm9udC1zaXplOi41M2VtOwogbWFyZ2luLWxlZnQ6LjNlbTsKIGNvbG9yOiNiYmI7CiBmb250LXdlaWdodDo0MDAKfQphcnRpY2xlIC5hcnRpY2xlLWxpc3QgaDI6YmVmb3JlLAptYWluIHNlY3Rpb24uY29udGVudCAuYXJ0aWNsZS1saXN0IGgyOmJlZm9yZSB7CiBjb250ZW50OicnCn0KYXJ0aWNsZSBoMjpiZWZvcmUsCm1haW4gc2VjdGlvbi5jb250ZW50IGgyOmJlZm9yZSB7CiBjb250ZW50OiIjICI7CiBjb2xvcjojNTU1Cn0KYXJ0aWNsZSBoMzpiZWZvcmUsCm1haW4gc2VjdGlvbi5jb250ZW50IGgzOmJlZm9yZSB7CiBjb250ZW50OiIjIyAiOwogY29sb3I6IzU1NQp9CmFydGljbGUgaDQ6YmVmb3JlLAptYWluIHNlY3Rpb24uY29udGVudCBoNDpiZWZvcmUgewogY29udGVudDoiIyMjICI7CiBjb2xvcjojNTU1Cn0KYXJ0aWNsZSB1bCBzcGFuLAptYWluIHNlY3Rpb24uY29udGVudCB1bCBzcGFuIHsKIGZvbnQtc2l6ZTouOGVtOwogbWFyZ2luLWxlZnQ6LjNlbQp9CmFydGljbGUgdWwgdGltZSwKbWFpbiBzZWN0aW9uLmNvbnRlbnQgdWwgdGltZSB7CiBtYXJnaW4tcmlnaHQ6LjNlbQp9CmFydGljbGUgb2wgdWwsCmFydGljbGUgdWwgb2wsCmFydGljbGUgdWwgdWwsCm1haW4gc2VjdGlvbi5jb250ZW50IG9sIHVsLAptYWluIHNlY3Rpb24uY29udGVudCB1bCBvbCwKbWFpbiBzZWN0aW9uLmNvbnRlbnQgdWwgdWwgewogbWFyZ2luLWxlZnQ6MAp9CmFydGljbGUgLmluZm8gc3BhbiwKbWFpbiBzZWN0aW9uLmNvbnRlbnQgLmluZm8gc3BhbiB7CiBtYXJnaW46MCAwIDJlbTsKIGJvcmRlcjoxcHggc29saWQgI2VlZTsKIHBhZGRpbmc6MTVweCAyMHB4OwogY29sb3I6I2JiYjsKIGRpc3BsYXk6YmxvY2sKfQphcnRpY2xlLmNvbnRlbnQgewogZm9udC1zaXplOi44NzVlbTsKIG1hcmdpbi10b3A6NTBweAp9CmFydGljbGUuY29udGVudCBkbCwKYXJ0aWNsZS5jb250ZW50IGgxLAphcnRpY2xlLmNvbnRlbnQgaDIsCmFydGljbGUuY29udGVudCBoMywKYXJ0aWNsZS5jb250ZW50IGg0LAphcnRpY2xlLmNvbnRlbnQgaDUsCmFydGljbGUuY29udGVudCBoNiwKYXJ0aWNsZS5jb250ZW50IGxlZ2VuZCwKYXJ0aWNsZS5jb250ZW50IG9sLAphcnRpY2xlLmNvbnRlbnQgcCwKYXJ0aWNsZS5jb250ZW50IHVsIHsKIHBhZGRpbmc6MCA1JQp9CmFydGljbGUuY29udGVudCBoMiB7CiBtYXJnaW46MmVtIDAgMS4yZW0KfQphcnRpY2xlLmNvbnRlbnQgaDMgewogbWFyZ2luOjEuOGVtIDAgMWVtCn0KYXJ0aWNsZS5jb250ZW50IGgxIHsKIGZvbnQtc2l6ZToxLjRlbTsKIG1hcmdpbjoxZW0gMCAuOGVtOwogcGFkZGluZzowIDUlOwogdGV4dC1hbGlnbjpsZWZ0Cn0KYXJ0aWNsZS5jb250ZW50IC5tZXRhLApzZWN0aW9uLmNvbnRlbnQgLm1ldGEgewogYm9yZGVyLWJvdHRvbTowOwogcGFkZGluZzoyMHB4IDAgNDBweCA1JQp9CmFydGljbGUgewogcGFkZGluZy1sZWZ0OjA7CiBwYWRkaW5nLXJpZ2h0OjAKfQphcnRpY2xlIG9sIHAsCmFydGljbGUgdWwgcCB7CiBwYWRkaW5nOjA7CiBtYXJnaW46MCBhdXRvCn0KYXJ0aWNsZSBibG9ja3F1b3RlIG9sLAphcnRpY2xlIGJsb2NrcXVvdGUgcCwKYXJ0aWNsZSBibG9ja3F1b3RlIHVsIHsKIHBhZGRpbmc6MAp9CmFydGljbGUgaHIgewogbWFyZ2luOjFlbSA1JQp9CmFydGljbGUgZmlndXJlIHsKIHRleHQtYWxpZ246Y2VudGVyCn0KYXJ0aWNsZSBmaWd1cmUgaW1nIHsKIG1heC13aWR0aDoxMDAlOwogYm9yZGVyLXRvcDoxcHggc29saWQgI2VlZTsKIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWUKfQphcnRpY2xlIGZpZ3VyZSBmaWdjYXB0aW9uIHsKIGZvbnQtc2l6ZTouOGVtOwogY29sb3I6I2JiYjsKIG1hcmdpbi10b3A6LTVweDsKIG1hcmdpbi1ib3R0b206MWVtOwogcGFkZGluZzowIDUlOwogbGluZS1oZWlnaHQ6MS44ZW0KfQphcnRpY2xlIGltZyB7CiBtYXgtd2lkdGg6MTAwJQp9CmFydGljbGUgZW1iZWQsCmFydGljbGUgaWZyYW1lIHsKIHdpZHRoOjEwMCU7CiBib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlOwogYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsKIG1hcmdpbjoxZW0gMAp9CmFydGljbGUgLnBvc3QgYSB7CiBib3JkZXItYm90dG9tOjFweCBzb2xpZDsKIHBhZGRpbmc6M3B4Cn0KYXJ0aWNsZSAucG9zdCBzdWIgYSwKYXJ0aWNsZSAucG9zdCBzdXAgYSB7CiBib3JkZXItYm90dG9tOjA7CiBwYWRkaW5nOjAKfQphcnRpY2xlIC5wb3N0IHN1YiBhOmJlZm9yZSwKYXJ0aWNsZSAucG9zdCBzdXAgYTpiZWZvcmUgewogY29udGVudDoiWyIKfQphcnRpY2xlIC5wb3N0IHN1YiBhOmFmdGVyLAphcnRpY2xlIC5wb3N0IHN1cCBhOmFmdGVyIHsKIGNvbnRlbnQ6Il0iCn0KYXJ0aWNsZSAudG9jIHsKIG1hcmdpbjowIDUlIDJlbTsKIGJvcmRlcjoxcHggc29saWQgI2VlZTsKIHBhZGRpbmc6MTVweCAyMHB4IDAKfQphcnRpY2xlIC50b2MgdWwgewogbGlzdC1zdHlsZTpjaXJjbGU7CiBwYWRkaW5nOjA7CiBjb2xvcjojYmJiOwogbWFyZ2luLWxlZnQ6MWVtCn0KYXJ0aWNsZSAudG9jIGEgewogYm9yZGVyLWJvdHRvbTpub25lCn0KYXJ0aWNsZSBvbCwKYXJ0aWNsZSB1bCB7CiBjb2xvcjppbmhlcml0OwogbWFyZ2luLWxlZnQ6MmVtCn0KYXJ0aWNsZSBvbCBvbCwKYXJ0aWNsZSBvbCB1bCwKYXJ0aWNsZSB1bCBvbCwKYXJ0aWNsZSB1bCB1bCB7CiBtYXJnaW4tYm90dG9tOjA7CiBwYWRkaW5nOjAKfQphcnRpY2xlIC5mb290bm90ZXMgb2wsCmFydGljbGUgLmZvb3Rub3RlcyB1bCB7CiBtYXJnaW4tbGVmdDoxZW07CiBjb2xvcjojYmJiCn0KYXJ0aWNsZSB1bCBzcGFuIHsKIGZvbnQtc2l6ZTppbmhlcml0OwogbWFyZ2luLWxlZnQ6aW5oZXJpdAp9Ci5tZF9saW5lIHsKIGxldHRlci1zcGFjaW5nOi41cHgKfQoubGlzdC1wYWdlciB7CiBwYWRkaW5nOjMwcHggMjBweDsKIGZvbnQtc2l6ZTouODc1ZW07CiBtYXJnaW46MCAzMHB4Cn0KLmxpc3QtcGFnZXIgLm5leHQgewogZmxvYXQ6cmlnaHQKfQoubGlzdC1wYWdlciAubmV4dCBpIHsKIG1hcmdpbi1sZWZ0OjhweAp9Ci5saXN0LXBhZ2VyIC5wcmUgewogZmxvYXQ6bGVmdAp9Ci5saXN0LXBhZ2VyIC5wcmUgaSB7CiBtYXJnaW4tcmlnaHQ6OHB4Cn0Kc2VjdGlvbi5wYWdlciB7CiBib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlOwogYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsKIHRleHQtYWxpZ246Y2VudGVyOwogb3ZlcmZsb3c6YXV0bzsKIG1hcmdpbjoyZW0gMCAwOwogZm9udC1zaXplOi44NzVlbQp9CnNlY3Rpb24ucGFnZXIgLmZ1bGxfcGFnaW5hdG9yLmZ1bGxfcGFnZXIgYSB7CiBwYWRkaW5nLWxlZnQ6MWVtOwogcGFkZGluZy1yaWdodDoxZW0KfQpzZWN0aW9uLnBhZ2VyIGEgewogcGFkZGluZzoxZW0gMDsKIGRpc3BsYXk6aW5saW5lLWJsb2NrCn0Kc2VjdGlvbi5wYWdlciBhLmN1cnJlbnQgewogY29sb3I6IzU1NQp9CnNlY3Rpb24ucGFnZXIgYTpob3ZlciB7CiBiYWNrZ3JvdW5kOiNmN2Y3ZjcKfQpzZWN0aW9uLnBhZ2VyIGEucHJlLApzZWN0aW9uLnBhZ2VyIHNwYW4ucHJlIHsKIGZsb2F0OmxlZnQ7CiB0ZXh0LWFsaWduOmxlZnQ7CiB3aWR0aDo0NSU7CiBwYWRkaW5nLWxlZnQ6NSUKfQpzZWN0aW9uLnBhZ2VyIGEucHJlOmJlZm9yZSwKc2VjdGlvbi5wYWdlciBzcGFuLnByZTpiZWZvcmUgewogY29udGVudDoi4oC5IjsKIGZvbnQtc2l6ZToxLjNlbTsKIHBhZGRpbmctcmlnaHQ6NXB4OwogZm9udC13ZWlnaHQ6NzAwOwogbGluZS1oZWlnaHQ6MWVtCn0Kc2VjdGlvbi5wYWdlciBhLm5leHQsCnNlY3Rpb24ucGFnZXIgc3Bhbi5uZXh0IHsKIGZsb2F0OnJpZ2h0OwogdGV4dC1hbGlnbjpyaWdodDsKIHdpZHRoOjQ1JTsKIHBhZGRpbmctcmlnaHQ6NSUKfQpzZWN0aW9uLnBhZ2VyIGEubmV4dDphZnRlciwKc2VjdGlvbi5wYWdlciBzcGFuLm5leHQ6YWZ0ZXIgewogY29udGVudDoi4oC6IjsKIGZvbnQtc2l6ZToxLjNlbTsKIHBhZGRpbmctbGVmdDo1cHg7CiBmb250LXdlaWdodDo3MDA7CiBsaW5lLWhlaWdodDoxZW0KfQpzZWN0aW9uLnBhZ2VyIHNwYW4gewogY29sb3I6I2JiYjsKIHBhZGRpbmc6MWVtIDAKfQpzZWN0aW9uLnBhZ2VyIC5wYWdpbmF0b3IgYSB7CiBwYWRkaW5nOjFlbSAuNWVtCn0Kc2VjdGlvbiNjb21tZW50cyB7CiBwYWRkaW5nOjAgNSU7CiBiYWNrZ3JvdW5kOiNmN2Y3Zjc7CiBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOwogcGFkZGluZy10b3A6LjVlbQp9Ci5kb2NfY29tbWVudHMgewogbWFyZ2luLXRvcDowIWltcG9ydGFudDsKIHBhZGRpbmc6MCFpbXBvcnRhbnQKfQouZG9jX2NvbW1lbnRzIC5jb21tZW50c19ibG9ja190aXRsZSB7CiBkaXNwbGF5Om5vbmUKfQouZG9jX2NvbW1lbnRzICNuZXdfY29tbWVudF9mb3JtIC5jb21tZW50X3RyaWdnZXIgLnRyaWdnZXJfdGl0bGUgewogbWFyZ2luLWxlZnQ6NjJweCFpbXBvcnRhbnQ7CiBsaW5lLWhlaWdodDozcGMhaW1wb3J0YW50Cn0KLmRvY19jb21tZW50cyAjbmV3X2NvbW1lbnRfZm9ybSB7CiBmb250LXNpemU6Ljg3NWVtOwogYmFja2dyb3VuZC1jb2xvcjppbmhlcml0IWltcG9ydGFudDsKIGJvcmRlcjowIWltcG9ydGFudDsKIG1hcmdpbjoxNXB4IDAhaW1wb3J0YW50Cn0KLmRvY19jb21tZW50cyAjbmV3X2NvbW1lbnRfZm9ybSAuaW5wdXRfYm9keSB7CiBiYWNrZ3JvdW5kLWNvbG9yOmluaGVyaXQhaW1wb3J0YW50OwogYm9yZGVyLXRvcDoxcHggc29saWQgI2VlZQp9Ci5kb2NfY29tbWVudHMgI25ld19jb21tZW50X2Zvcm0gLmlucHV0X2JvZHkgbGkgaW5wdXQgewogcGFkZGluZy1sZWZ0OjAhaW1wb3J0YW50OwogcGFkZGluZy1yaWdodDoxZW0haW1wb3J0YW50Cn0KLmRvY19jb21tZW50cyAjbmV3X2NvbW1lbnRfZm9ybSAuaW5wdXRfYm9keSBsaSB7CiBtYXJnaW4tdG9wOjhweCFpbXBvcnRhbnQKfQouZG9jX2NvbW1lbnRzICNuZXdfY29tbWVudF9mb3JtIC5jb21tZW50X3N1Ym1pdF9idXR0b24gewogZm9udC1zaXplOi44NzVlbTsKIG1hcmdpbjo4cHggMCFpbXBvcnRhbnQ7CiBib3JkZXItcmFkaXVzOjAhaW1wb3J0YW50OwogY3Vyc29yOnBvaW50ZXIKfQouZG9jX2NvbW1lbnRzIC5jb21tZW50cyB1bCB7CiBtYXJnaW46MAp9Ci5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5jb21tZW50IHsKIHBhZGRpbmc6MCFpbXBvcnRhbnQ7CiBiYWNrZ3JvdW5kLWNvbG9yOmluaGVyaXQhaW1wb3J0YW50OwogbWFyZ2luOjAhaW1wb3J0YW50OwogYm9yZGVyLXJhZGl1czowIWltcG9ydGFudDsKIGJvcmRlcjowIWltcG9ydGFudDsKIGJvcmRlci10b3A6MXB4IHNvbGlkICNlZWUhaW1wb3J0YW50Cn0KLmRvY19jb21tZW50cyAuY29tbWVudHMgLmNvbW1lbnQgLmF1dGhvciB7CiBwYWRkaW5nOjFlbSAwIDAhaW1wb3J0YW50Cn0KLmRvY19jb21tZW50cyAuY29tbWVudHMgLmNvbW1lbnQgLmF1dGhvciAuYXV0aG9yLW5hbWUgewogZmxvYXQ6bGVmdAp9Ci5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5jb21tZW50IC5hdXRob3IgYiB7CiBiYWNrZ3JvdW5kLWNvbG9yOmluaGVyaXQhaW1wb3J0YW50OwogY29sb3I6Izk5OSFpbXBvcnRhbnQ7CiAtd2Via2l0LXRyYW5zaXRpb246LjVzOwogdHJhbnNpdGlvbjouNXM7CiBtYXJnaW4tbGVmdDo2MnB4IWltcG9ydGFudDsKIGZvbnQtc2l6ZTouOWVtIWltcG9ydGFudDsKIGZvbnQtd2VpZ2h0OjcwMCFpbXBvcnRhbnQKfQouZG9jX2NvbW1lbnRzIC5jb21tZW50cyAuY29tbWVudCAuYXV0aG9yIGI6aG92ZXIgewogY29sb3I6cmVkIWltcG9ydGFudAp9Ci5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5jb21tZW50IC5hdXRob3IgLnJlcGx5IHsKIGZvbnQtc2l6ZTouNzVlbSFpbXBvcnRhbnQ7CiBiYWNrZ3JvdW5kOmluaGVyaXQhaW1wb3J0YW50OwogY29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50OwogLXdlYmtpdC10cmFuc2l0aW9uOi41czsKIHRyYW5zaXRpb246LjVzCn0KLmRvY19jb21tZW50cyAuY29tbWVudHMgLmNvbW1lbnQgLmF1dGhvciAucmVwbHk6YmVmb3JlIHsKIGNvbnRlbnQ6IuWbnuWkjSI7CiBjb2xvcjojZmZmOwogbWFyZ2luLXJpZ2h0Oi0yZW07CiBiYWNrZ3JvdW5kOiNkZGQ7CiBwYWRkaW5nOjNweCA0cHggMnB4Cn0KLmRvY19jb21tZW50cyAuY29tbWVudHMgLmNvbW1lbnQgLmF1dGhvciBzbWFsbCB7CiBmbG9hdDpsZWZ0OwogbWFyZ2luOjAhaW1wb3J0YW50OwogY29sb3I6I2NjYzsKIHBhZGRpbmctdG9wOjRweDsKIGZvbnQtc2l6ZTouOGVtCn0KLmRvY19jb21tZW50cyAjbmV3X2NvbW1lbnRfZm9ybSAuY29tbWVudF90cmlnZ2VyIC5hdmF0YXIsCi5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5jb21tZW50IC5hdXRob3IgLmF2YXRhciB7CiB3aWR0aDozcGMhaW1wb3J0YW50OwogaGVpZ2h0OjNwYyFpbXBvcnRhbnQKfQouZG9jX2NvbW1lbnRzICNuZXdfY29tbWVudF9mb3JtIC5jb21tZW50X3RyaWdnZXIgLmF2YXRhciBpbWcsCi5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5jb21tZW50IC5hdXRob3IgLmF2YXRhciBpbWcgewogYm9yZGVyLXJhZGl1czo1JSFpbXBvcnRhbnQKfQouZG9jX2NvbW1lbnRzIC5jb21tZW50cyAuY29tbWVudCAuYXV0aG9yIC5hdmF0YXIgewogdG9wOjFlbSFpbXBvcnRhbnQKfQouZG9jX2NvbW1lbnRzIC5jb21tZW50cyAuY29tbWVudCAucF9wYXJ0IHsKIG1hcmdpbjowIDAgLjdlbSFpbXBvcnRhbnQKfQouZG9jX2NvbW1lbnRzIC5jb21tZW50cyAuY29tbWVudCAuY29tbWVudF9jb250ZW50IHsKIGNvbG9yOiMzMzM7CiBtYXJnaW4tbGVmdDo2MnB4OwogbWFyZ2luLXRvcDoyMXB4Cn0KLmRvY19jb21tZW50cyAuY29tbWVudHMgLnN1Yl9jb21tZW50cyB7CiBwYWRkaW5nLWxlZnQ6NjJweCFpbXBvcnRhbnQKfQouZG9jX2NvbW1lbnRzIC5jb21tZW50cyAuc3ViX2NvbW1lbnRzIC5zdWJfY29tbWVudHMgLnN1Yl9jb21tZW50cyB7CiBwYWRkaW5nLWxlZnQ6MCFpbXBvcnRhbnQKfQphc2lkZSB7CiBvdmVyZmxvdzphdXRvOwogcGFkZGluZy10b3A6MjBweDsKIG1heC13aWR0aDo2ODBweDsKIG1hcmdpbjowIGF1dG8KfQphc2lkZSAuYXNpZGUtbGVmdCB7CiB3aWR0aDo3NSUKfQphc2lkZSAuYXNpZGUtcmlnaHQgewogd2lkdGg6MjUlCn0KYXNpZGUgLnNpZGViYXIgewogZmxvYXQ6bGVmdAp9CmFzaWRlIC5zaWRlYmFyIGgzIHsKIGZvbnQtd2VpZ2h0OjQwMDsKIGZvbnQtc2l6ZToxNHB4Cn0KYXNpZGUgLnNpZGViYXIgbGkgewogZm9udC1zaXplOjlwdDsKIGZsb2F0OmxlZnQ7CiB3aWR0aDo1MCU7CiBkaXNwbGF5OmJsb2NrCn0KYXNpZGUgc3BhbiB7CiBmb250LXNpemU6LjhlbTsKIG1hcmdpbi1sZWZ0Oi4zZW07CiBjb2xvcjojYmJiCn0KLmFydGljbGUtbGlzdCB7CiBwYWRkaW5nOjAgMjBweDsKIG1hcmdpbjowIDMwcHgKfQouYXJ0aWNsZS1saXN0IGFydGljbGUgewogbWFyZ2luLXRvcDo1MHB4Cn0KLmFydGljbGUtbGlzdCBhcnRpY2xlIGgyIHsKIGxpbmUtaGVpZ2h0OjMwcHg7CiBmb250LXdlaWdodDo2MDAKfQouYXJ0aWNsZS1saXN0IGFydGljbGUgaDIgYSB7CiBjb2xvcjojMWYxZjFmCn0KLmFydGljbGUtbGlzdCBhcnRpY2xlIC5tZXRhIHsKIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNmM2YzZjMKfQouZXhjZXJwdCBwIHsKIGNvbG9yOiMzMzM7CiBsZXR0ZXItc3BhY2luZzouMnB4OwogbGluZS1oZWlnaHQ6MmVtOwogdGV4dC1hbGlnbjpsZWZ0Cn0KLmFyY2hpdmVkLXBvc3RzLAouZXhjZXJwdCBwIHsKIGZvbnQtc2l6ZTouODc1ZW0KfQpmb290ZXIgewogdGV4dC1hbGlnbjpjZW50ZXI7CiBwYWRkaW5nOjYwcHggMDsKIGZvbnQtc2l6ZTouOGVtOwogbGluZS1oZWlnaHQ6M2VtOwogY29sb3I6I2JiYgp9CmZvb3RlciAucG93ZXJlZF9ieSB7CiBsaW5lLWhlaWdodDoxLjJlbQp9CmZvb3RlciAuZm9vdGVyX3Nsb2dhbiB7CiBwYWRkaW5nLXRvcDoyNXB4OwogbWF4LXdpZHRoOjkwcHQ7CiBtYXJnaW46MCBhdXRvOwogcGFkZGluZy1ib3R0b206MTBweAp9CiNiYWNrX3RvX3RvcCB7CiBiYWNrZ3JvdW5kOiNmZmY7CiBib3gtc2hhZG93OjAgMTBweCAyMHB4IDAgaHNsYSgwLDAlLDkzJSwuODYpCn0KI2JhY2tfdG9fdG9wIHNwYW4gewogY29sb3I6I2NjYwp9CkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDo2MDBweCkgewogLndyYXBwZXIgewogIG1hcmdpbi10b3A6MAogfQogaGVhZGVyIC5sb2dvIHsKICBkaXNwbGF5Om5vbmUKIH0KIGhlYWRlciAuZGVzY3JpcHRpb24gewogIGZsb2F0Om5vbmUKIH0KIGhlYWRlciAuZGVzY3JpcHRpb24gaDEsCiBoZWFkZXIgLmRlc2NyaXB0aW9uIGgyIHsKICB0ZXh0LWFsaWduOmNlbnRlcgogfQogLmFydGljbGUtbGlzdCB7CiAgbWFyZ2luOjA7CiAgcGFkZGluZzowCiB9CiAuYXJ0aWNsZS1saXN0IC5tZXRhIHsKICBwYWRkaW5nLWxlZnQ6NSU7CiAgcGFkZGluZy1yaWdodDo1JQogfQogbmF2IHsKICB3aWR0aDoxMDAlOwogIHRleHQtYWxpZ246Y2VudGVyOwogIG1hcmdpbi10b3A6MmVtCiB9CiBhc2lkZSAuc2lkZWJhciB7CiAgd2lkdGg6MTAwJTsKICBmbG9hdDpub25lCiB9CiBhc2lkZSwKIG1haW4gc2VjdGlvbi5jb250ZW50LAogcHJlIHsKICBwYWRkaW5nOjAgNSUKIH0KIGFzaWRlIHsKICBwYWRkaW5nLXRvcDoyMHB4CiB9CiBwcmUgewogIHBhZGRpbmctdG9wOjFlbTsKICBwYWRkaW5nLWJvdHRvbToxZW0KIH0KIGFydGljbGUgZGwsCiBhcnRpY2xlIGgxLAogYXJ0aWNsZSBoMiwKIGFydGljbGUgaDMsCiBhcnRpY2xlIGg0LAogYXJ0aWNsZSBoNSwKIGFydGljbGUgaDYsCiBhcnRpY2xlIGxlZ2VuZCwKIGFydGljbGUgb2wsCiBhcnRpY2xlIHAsCiBhcnRpY2xlIHVsIHsKICBwYWRkaW5nOjAgNSUKIH0KIGJsb2NrcXVvdGUgewogIHBhZGRpbmc6MCAyNXB4IDFlbSAyMHB4OwogIGJvcmRlci1sZWZ0OjVweCBzb2xpZCAjZGRkCiB9CiBibG9ja3F1b3RlOmJlZm9yZSB7CiAgbWFyZ2luLWxlZnQ6LTIwcHgKIH0KIC5kb2NfY29tbWVudHMgI25ld19jb21tZW50X2Zvcm0gLmNvbW1lbnRfdHJpZ2dlciAuYXZhdGFyLAogLmRvY19jb21tZW50cyAuY29tbWVudHMgLmNvbW1lbnQgLmF1dGhvciAuYXZhdGFyIHsKICB3aWR0aDozNnB4IWltcG9ydGFudDsKICBoZWlnaHQ6MzZweCFpbXBvcnRhbnQKIH0KIC5kb2NfY29tbWVudHMgI25ld19jb21tZW50X2Zvcm0gLmNvbW1lbnRfdHJpZ2dlciAudHJpZ2dlcl90aXRsZSwKIC5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5jb21tZW50IC5hdXRob3IgYiwKIC5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5jb21tZW50IC5jb21tZW50X2NvbnRlbnQgewogIG1hcmdpbi1sZWZ0OjNwYyFpbXBvcnRhbnQKIH0KIC5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5jb21tZW50IC5wX3BhcnQgewogIGZvbnQtc2l6ZTouOTVlbTsKICBsaW5lLWhlaWdodDoyZW0KIH0KIC5kb2NfY29tbWVudHMgLmNvbW1lbnRzIC5zdWJfY29tbWVudHMgewogIHBhZGRpbmctbGVmdDozcGMhaW1wb3J0YW50CiB9CiAuZG9jX2NvbW1lbnRzIC5jb21tZW50cyAuc3ViX2NvbW1lbnRzIC5zdWJfY29tbWVudHMgewogIHBhZGRpbmctbGVmdDowIWltcG9ydGFudAogfQp9Ci5jb2RlaGlsaXRlIC5jIHsKIGNvbG9yOiM5OTkKfQouY29kZWhpbGl0ZSAuZXJyIHsKIGNvbG9yOiNhNjE3MTc7CiBiYWNrZ3JvdW5kLWNvbG9yOiNlM2QyZDIKfQouY29kZWhpbGl0ZSAuayB7CiBjb2xvcjojOGIwMDhiOwogZm9udC13ZWlnaHQ6NzAwCn0KLmNvZGVoaWxpdGUgLm4sCi5jb2RlaGlsaXRlIC5vLAouY29kZWhpbGl0ZSAucCB7CiBjb2xvcjojNTU1Cn0KLmNvZGVoaWxpdGUgLmNtIHsKIGNvbG9yOiM5OTkKfQouY29kZWhpbGl0ZSAuY3AgewogY29sb3I6IzFlODg5Ygp9Ci5jb2RlaGlsaXRlIC5jMSB7CiBjb2xvcjojOTk5Cn0KLmNvZGVoaWxpdGUgLmNzIHsKIGNvbG9yOiM4YjAwOGI7CiBmb250LXdlaWdodDo3MDAKfQouY29kZWhpbGl0ZSAuZ2QgewogY29sb3I6I2EwMAp9Ci5jb2RlaGlsaXRlIC5nZSB7CiBmb250LXN0eWxlOml0YWxpYwp9Ci5jb2RlaGlsaXRlIC5nciB7CiBjb2xvcjojYTAwCn0KLmNvZGVoaWxpdGUgLmdoIHsKIGNvbG9yOm5hdnk7CiBmb250LXdlaWdodDo3MDAKfQouY29kZWhpbGl0ZSAuZ2kgewogY29sb3I6IzBhMAp9Ci5jb2RlaGlsaXRlIC5nbyB7CiBjb2xvcjojODg4Cn0KLmNvZGVoaWxpdGUgLmdwIHsKIGNvbG9yOiM1NTUKfQouY29kZWhpbGl0ZSAuZ3MgewogZm9udC13ZWlnaHQ6NzAwCn0KLmNvZGVoaWxpdGUgLmd1IHsKIGNvbG9yOnB1cnBsZTsKIGZvbnQtd2VpZ2h0OjcwMAp9Ci5jb2RlaGlsaXRlIC5ndCB7CiBjb2xvcjojYTAwCn0KLmNvZGVoaWxpdGUgLmtjLAouY29kZWhpbGl0ZSAua2QsCi5jb2RlaGlsaXRlIC5rbiwKLmNvZGVoaWxpdGUgLmtwLAouY29kZWhpbGl0ZSAua3IgewogY29sb3I6IzhiMDA4YjsKIGZvbnQtd2VpZ2h0OjcwMAp9Ci5jb2RlaGlsaXRlIC5rdCB7CiBjb2xvcjojYTdhN2E3OwogZm9udC13ZWlnaHQ6NzAwCn0KLmNvZGVoaWxpdGUgLm0gewogY29sb3I6I2I0NTJjZAp9Ci5jb2RlaGlsaXRlIC5zIHsKIGNvbG9yOiNjZDU1NTUKfQouY29kZWhpbGl0ZSAubmEsCi5jb2RlaGlsaXRlIC5uYiB7CiBjb2xvcjojNjU4YjAwCn0KLmNvZGVoaWxpdGUgLm5jIHsKIGNvbG9yOiMwMDhiNDU7CiBmb250LXdlaWdodDo3MDAKfQouY29kZWhpbGl0ZSAubm8gewogY29sb3I6IzAwNjg4Ygp9Ci5jb2RlaGlsaXRlIC5uZCB7CiBjb2xvcjojNzA3YTdjCn0KLmNvZGVoaWxpdGUgLm5pIHsKIGNvbG9yOiM1NTUKfQouY29kZWhpbGl0ZSAubmUgewogY29sb3I6IzAwOGI0NTsKIGZvbnQtd2VpZ2h0OjcwMAp9Ci5jb2RlaGlsaXRlIC5uZiB7CiBjb2xvcjojMDA4YjQ1Cn0KLmNvZGVoaWxpdGUgLm5sIHsKIGNvbG9yOiM1NTUKfQouY29kZWhpbGl0ZSAubm4gewogY29sb3I6IzAwOGI0NTsKIHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUKfQouY29kZWhpbGl0ZSAubngsCi5jb2RlaGlsaXRlIC5weSB7CiBjb2xvcjojNTU1Cn0KLmNvZGVoaWxpdGUgLm50IHsKIGNvbG9yOiM4YjAwOGI7CiBmb250LXdlaWdodDo3MDAKfQouY29kZWhpbGl0ZSAubnYgewogY29sb3I6IzAwNjg4Ygp9Ci5jb2RlaGlsaXRlIC5vdyB7CiBjb2xvcjojOGIwMDhiCn0KLmNvZGVoaWxpdGUgLncgewogY29sb3I6I2JiYgp9Ci5jb2RlaGlsaXRlIC5tYiwKLmNvZGVoaWxpdGUgLm1mLAouY29kZWhpbGl0ZSAubWgsCi5jb2RlaGlsaXRlIC5taSwKLmNvZGVoaWxpdGUgLm1vIHsKIGNvbG9yOiNiNDUyY2QKfQouY29kZWhpbGl0ZSAuczIsCi5jb2RlaGlsaXRlIC5zYiwKLmNvZGVoaWxpdGUgLnNjLAouY29kZWhpbGl0ZSAuc2QsCi5jb2RlaGlsaXRlIC5zZSB7CiBjb2xvcjojY2Q1NTU1Cn0KLmNvZGVoaWxpdGUgLnNoIHsKIGNvbG9yOiMxYzdlNzE7CiBmb250LXN0eWxlOml0YWxpYwp9Ci5jb2RlaGlsaXRlIC5zaSB7CiBjb2xvcjojY2Q1NTU1Cn0KLmNvZGVoaWxpdGUgLnN4IHsKIGNvbG9yOiNjYjZjMjAKfQouY29kZWhpbGl0ZSAuc3IgewogY29sb3I6IzFjN2U3MQp9Ci5jb2RlaGlsaXRlIC5zMSwKLmNvZGVoaWxpdGUgLnNzIHsKIGNvbG9yOiNjZDU1NTUKfQouY29kZWhpbGl0ZSAuYnAgewogY29sb3I6IzY1OGIwMAp9Ci5jb2RlaGlsaXRlIC52YywKLmNvZGVoaWxpdGUgLnZnLAouY29kZWhpbGl0ZSAudmkgewogY29sb3I6IzAwNjg4Ygp9Ci5jb2RlaGlsaXRlIC5pbCB7CiBjb2xvcjojYjQ1MmNkCn0K"),
			"./src/static/css/strapdown.css":b64d("LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKClRoaXMgY2h1bmsgaXMgdG8gZml4IEJvb3RzdHJhcCBzbyB0aGF0IHRoZSBNYXJrZG93biBvdXRwdXQgbG9va3MgZ29vZAoKKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCmJvZHkgewogICAgcGFkZGluZy10b3A6IDBweDsKICAgIHBhZGRpbmctYm90dG9tOiA0MHB4OwogICAgZm9udC1zaXplOiAxNXB4OwogICAgbGluZS1oZWlnaHQ6IDE1MCU7Cn0KCnhtcCwgdGV4dGFyZWEgewogICAgZGlzcGxheTogbm9uZTsKfQoKaDEsIGgyLCBoMywgaDQgewogICAgbWFyZ2luOiAxNXB4IDA7Cn0KCnByZSB7CiAgICBtYXJnaW46IDIwcHggMDsKfQoKaW1nIHsKICAgIG1hcmdpbjogMTBweCAwOwp9CgoubmF2YmFyIHsKICAgIHotaW5kZXg6IDE7Cn0KCi50YWJsZSB7CiAgICB3aWR0aDogYXV0bzsKfQoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKClRoaXMgY2h1bmsgaXMgZm9yIEdvb2dsZSdzIENvZGUgUHJldHRpZnk6Cmh0dHA6Ly9nb29nbGUtY29kZS1wcmV0dGlmeS5nb29nbGVjb2RlLmNvbQoKKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qIFByZXR0eSBwcmludGluZyBzdHlsZXMuIFVzZWQgd2l0aCBwcmV0dGlmeS5qcy4gKi8KCi8qIFNQQU4gZWxlbWVudHMgd2l0aCB0aGUgY2xhc3NlcyBiZWxvdyBhcmUgYWRkZWQgYnkgcHJldHR5cHJpbnQuICovCi5wbG4gewogICAgY29sb3I6IGJsYWNrOwp9CgovKiBwbGFpbiB0ZXh0ICovCgpAbWVkaWEgc2NyZWVuIHsKICAgIC5zdHIgewogICAgICAgIGNvbG9yOiAjMDgwCiAgICB9CgogICAgLyogc3RyaW5nIGNvbnRlbnQgKi8KICAgIC5rd2QgewogICAgICAgIGNvbG9yOiAjMDA4CiAgICB9CgogICAgLyogYSBrZXl3b3JkICovCiAgICAuY29tIHsKICAgICAgICBjb2xvcjogIzgwMAogICAgfQoKICAgIC8qIGEgY29tbWVudCAqLwogICAgLnR5cCB7CiAgICAgICAgY29sb3I6ICM2MDYKICAgIH0KCiAgICAvKiBhIHR5cGUgbmFtZSAqLwogICAgLmxpdCB7CiAgICAgICAgY29sb3I6ICMwNjYKICAgIH0KCiAgICAvKiBhIGxpdGVyYWwgdmFsdWUgKi8KICAgIC8qIHB1bmN0dWF0aW9uLCBsaXNwIG9wZW4gYnJhY2tldCwgbGlzcCBjbG9zZSBicmFja2V0ICovCiAgICAucHVuLCAub3BuLCAuY2xvIHsKICAgICAgICBjb2xvcjogIzY2MAogICAgfQoKICAgIC50YWcgewogICAgICAgIGNvbG9yOiAjMDA4CiAgICB9CgogICAgLyogYSBtYXJrdXAgdGFnIG5hbWUgKi8KICAgIC5hdG4gewogICAgICAgIGNvbG9yOiAjNjA2CiAgICB9CgogICAgLyogYSBtYXJrdXAgYXR0cmlidXRlIG5hbWUgKi8KICAgIC5hdHYgewogICAgICAgIGNvbG9yOiAjMDgwCiAgICB9CgogICAgLyogYSBtYXJrdXAgYXR0cmlidXRlIHZhbHVlICovCiAgICAuZGVjLCAudmFyIHsKICAgICAgICBjb2xvcjogIzYwNgogICAgfQoKICAgIC8qIGEgZGVjbGFyYXRpb247IGEgdmFyaWFibGUgbmFtZSAqLwogICAgLmZ1biB7CiAgICAgICAgY29sb3I6IHJlZAogICAgfQoKICAgIC8qIGEgZnVuY3Rpb24gbmFtZSAqLwp9CgovKiBVc2UgaGlnaGVyIGNvbnRyYXN0IGFuZCB0ZXh0LXdlaWdodCBmb3IgcHJpbnRhYmxlIGZvcm0uICovCkBtZWRpYSBwcmludCwgcHJvamVjdGlvbiB7CiAgICAuc3RyIHsKICAgICAgICBjb2xvcjogIzA2MAogICAgfQoKICAgIC5rd2QgewogICAgICAgIGNvbG9yOiAjMDA2OwogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkCiAgICB9CgogICAgLmNvbSB7CiAgICAgICAgY29sb3I6ICM2MDA7CiAgICAgICAgZm9udC1zdHlsZTogaXRhbGljCiAgICB9CgogICAgLnR5cCB7CiAgICAgICAgY29sb3I6ICM0MDQ7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQKICAgIH0KCiAgICAubGl0IHsKICAgICAgICBjb2xvcjogIzA0NAogICAgfQoKICAgIC5wdW4sIC5vcG4sIC5jbG8gewogICAgICAgIGNvbG9yOiAjNDQwCiAgICB9CgogICAgLnRhZyB7CiAgICAgICAgY29sb3I6ICMwMDY7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQKICAgIH0KCiAgICAuYXRuIHsKICAgICAgICBjb2xvcjogIzQwNAogICAgfQoKICAgIC5hdHYgewogICAgICAgIGNvbG9yOiAjMDYwCiAgICB9Cn0KCi8qIFB1dCBhIGJvcmRlciBhcm91bmQgcHJldHR5cHJpbnRlZCBjb2RlIHNuaXBwZXRzLiAqLwpwcmUucHJldHR5cHJpbnQgewogICAgcGFkZGluZzogMnB4OwogICAgYm9yZGVyOiAxcHggc29saWQgIzg4OAp9CgovKiBTcGVjaWZ5IGNsYXNzPWxpbmVudW1zIG9uIGEgcHJlIHRvIGdldCBsaW5lIG51bWJlcmluZyAqLwpvbC5saW5lbnVtcyB7CiAgICBtYXJnaW4tdG9wOiAwOwogICAgbWFyZ2luLWJvdHRvbTogMAp9CgovKiBJRSBpbmRlbnRzIHZpYSBtYXJnaW4tbGVmdCAqLwpsaS5MMCwKbGkuTDEsCmxpLkwyLApsaS5MMywKbGkuTDUsCmxpLkw2LApsaS5MNywKbGkuTDggewogICAgbGlzdC1zdHlsZS10eXBlOiBub25lCn0KCi8qIEFsdGVybmF0ZSBzaGFkaW5nIGZvciBsaW5lcyAqLwpsaS5MMSwKbGkuTDMsCmxpLkw1LApsaS5MNywKbGkuTDkgewogICAgYmFja2dyb3VuZDogI2VlZQp9Cgo="),
			"./src/static/js/strapdown.js":b64d("LyoqCiAqIG1hcmtlZCAtIGEgbWFya2Rvd24gcGFyc2VyCiAqIENvcHlyaWdodCAoYykgMjAxMS0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5LiAoTUlUIExpY2Vuc2VkKQogKiBodHRwczovL2dpdGh1Yi5jb20vY2hqai9tYXJrZWQKICovCjsoZnVuY3Rpb24gKCkgewogICAgdmFyIGJsb2NrID0gewogICAgICAgIG5ld2xpbmU6IC9eXG4rLywKICAgICAgICBjb2RlOiAvXiggezR9W15cbl0rXG4qKSsvLAogICAgICAgIGZlbmNlczogbm9vcCwKICAgICAgICBocjogL14oICpbLSpfXSl7Myx9ICooPzpcbit8JCkvLAogICAgICAgIGhlYWRpbmc6IC9eICooI3sxLDZ9KSAqKFteXG5dKz8pICojKiAqKD86XG4rfCQpLywKICAgICAgICBucHRhYmxlOiBub29wLAogICAgICAgIGxoZWFkaW5nOiAvXihbXlxuXSspXG4gKig9fC0pezMsfSAqXG4qLywKICAgICAgICBibG9ja3F1b3RlOiAvXiggKj5bXlxuXSsoXG5bXlxuXSspKlxuKikrLywKICAgICAgICBsaXN0OiAvXiggKikoYnVsbCkgW1xzXFNdKz8oPzpocnxcbnsyLH0oPyEgKSg/IVwxYnVsbCApXG4qfFxzKiQpLywKICAgICAgICBodG1sOiAvXiAqKD86Y29tbWVudHxjbG9zZWR8Y2xvc2luZykgKig/OlxuezIsfXxccyokKS8sCiAgICAgICAgZGVmOiAvXiAqXFsoW15cXV0rKVxdOiAqPD8oW15ccz5dKyk+Pyg/OiArWyIoXShbXlxuXSspWyIpXSk/ICooPzpcbit8JCkvLAogICAgICAgIHRhYmxlOiBub29wLAogICAgICAgIHBhcmFncmFwaDogL14oKD86W15cbl0rXG4/KD8haHJ8aGVhZGluZ3xsaGVhZGluZ3xibG9ja3F1b3RlfHRhZ3xkZWYpKSspXG4qLywKICAgICAgICB0ZXh0OiAvXlteXG5dKy8KICAgIH07CiAgICBibG9jay5idWxsZXQgPSAvKD86WyorLV18XGQrXC4pLzsKICAgIGJsb2NrLml0ZW0gPSAvXiggKikoYnVsbCkgW15cbl0qKD86XG4oPyFcMWJ1bGwgKVteXG5dKikqLzsKICAgIGJsb2NrLml0ZW0gPSByZXBsYWNlKGJsb2NrLml0ZW0sICdnbScpCiAgICAoL2J1bGwvZywgYmxvY2suYnVsbGV0KQogICAgKCk7CiAgICBibG9jay5saXN0ID0gcmVwbGFjZShibG9jay5saXN0KQogICAgKC9idWxsL2csIGJsb2NrLmJ1bGxldCkKICAgICgnaHInLCAvXG4rKD89KD86ICpbLSpfXSl7Myx9ICooPzpcbit8JCkpLykKICAgICgpOwogICAgYmxvY2suX3RhZyA9ICcoPyEoPzonCiAgICAgICAgKyAnYXxlbXxzdHJvbmd8c21hbGx8c3xjaXRlfHF8ZGZufGFiYnJ8ZGF0YXx0aW1lfGNvZGUnCiAgICAgICAgKyAnfHZhcnxzYW1wfGtiZHxzdWJ8c3VwfGl8Ynx1fG1hcmt8cnVieXxydHxycHxiZGl8YmRvJwogICAgICAgICsgJ3xzcGFufGJyfHdicnxpbnN8ZGVsfGltZylcXGIpXFx3Kyg/ITovfEApXFxiJzsKICAgIGJsb2NrLmh0bWwgPSByZXBsYWNlKGJsb2NrLmh0bWwpCiAgICAoJ2NvbW1lbnQnLCAvPCEtLVtcc1xTXSo/LS0+LykKICAgICgnY2xvc2VkJywgLzwodGFnKVtcc1xTXSs/PFwvXDE+LykKICAgICgnY2xvc2luZycsIC88dGFnKD86IlteIl0qInwnW14nXSonfFteJyI+XSkqPz4vKQogICAgKC90YWcvZywgYmxvY2suX3RhZykKICAgICgpOwogICAgYmxvY2sucGFyYWdyYXBoID0gcmVwbGFjZShibG9jay5wYXJhZ3JhcGgpCiAgICAoJ2hyJywgYmxvY2suaHIpCiAgICAoJ2hlYWRpbmcnLCBibG9jay5oZWFkaW5nKQogICAgKCdsaGVhZGluZycsIGJsb2NrLmxoZWFkaW5nKQogICAgKCdibG9ja3F1b3RlJywgYmxvY2suYmxvY2txdW90ZSkKICAgICgndGFnJywgJzwnICsgYmxvY2suX3RhZykKICAgICgnZGVmJywgYmxvY2suZGVmKQogICAgKCk7CiAgICBibG9jay5ub3JtYWwgPSBtZXJnZSh7fSwgYmxvY2spOwogICAgYmxvY2suZ2ZtID0gbWVyZ2Uoe30sIGJsb2NrLm5vcm1hbCwgewogICAgICAgIGZlbmNlczogL14gKihgezMsfXx+ezMsfSkgKihcdyspPyAqXG4oW1xzXFNdKz8pXHMqXDEgKig/OlxuK3wkKS8sCiAgICAgICAgcGFyYWdyYXBoOiAvXi8KICAgIH0pOwogICAgYmxvY2suZ2ZtLnBhcmFncmFwaCA9IHJlcGxhY2UoYmxvY2sucGFyYWdyYXBoKQogICAgKCcoPyEnLCAnKD8hJyArIGJsb2NrLmdmbS5mZW5jZXMuc291cmNlLnJlcGxhY2UoJ1xcMScsICdcXDInKSArICd8JykKICAgICgpOwogICAgYmxvY2sudGFibGVzID0gbWVyZ2Uoe30sIGJsb2NrLmdmbSwgewogICAgICAgIG5wdGFibGU6IC9eICooXFMuKlx8LiopXG4gKihbLTpdKyAqXHxbLXwgOl0qKVxuKCg/Oi4qXHwuKig/OlxufCQpKSopXG4qLywKICAgICAgICB0YWJsZTogL14gKlx8KC4rKVxuICpcfCggKlstOl0rWy18IDpdKilcbigoPzogKlx8LiooPzpcbnwkKSkqKVxuKi8KICAgIH0pOwogICAgZnVuY3Rpb24gTGV4ZXIob3B0aW9ucykgewogICAgICAgIHRoaXMudG9rZW5zID0gW107CiAgICAgICAgdGhpcy50b2tlbnMubGlua3MgPSB7fTsKICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IG1hcmtlZC5kZWZhdWx0czsKICAgICAgICB0aGlzLnJ1bGVzID0gYmxvY2subm9ybWFsOwogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2ZtKSB7CiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGFibGVzKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJ1bGVzID0gYmxvY2sudGFibGVzOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IGJsb2NrLmdmbTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBMZXhlci5ydWxlcyA9IGJsb2NrOwogICAgTGV4ZXIubGV4ID0gZnVuY3Rpb24gKHNyYywgb3B0aW9ucykgewogICAgICAgIHZhciBsZXhlciA9IG5ldyBMZXhlcihvcHRpb25zKTsKICAgICAgICByZXR1cm4gbGV4ZXIubGV4KHNyYyk7CiAgICB9OwogICAgTGV4ZXIucHJvdG90eXBlLmxleCA9IGZ1bmN0aW9uIChzcmMpIHsKICAgICAgICBzcmMgPSBzcmMucmVwbGFjZSgvXHJcbnxcci9nLCAnXG4nKS5yZXBsYWNlKC9cdC9nLCAnICAgICcpLnJlcGxhY2UoL1x1MDBhMC9nLCAnICcpLnJlcGxhY2UoL1x1MjQyNC9nLCAnXG4nKTsKICAgICAgICByZXR1cm4gdGhpcy50b2tlbihzcmMsIHRydWUpOwogICAgfTsKICAgIExleGVyLnByb3RvdHlwZS50b2tlbiA9IGZ1bmN0aW9uIChzcmMsIHRvcCkgewogICAgICAgIHZhciBzcmMgPSBzcmMucmVwbGFjZSgvXiArJC9nbSwgJycpLCBuZXh0LCBsb29zZSwgY2FwLCBidWxsLCBiLCBpdGVtLCBzcGFjZSwgaSwgbDsKICAgICAgICB3aGlsZSAoc3JjKSB7CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLm5ld2xpbmUuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgaWYgKGNhcFswXS5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7dHlwZTogJ3NwYWNlJ30pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLmNvZGUuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgY2FwID0gY2FwWzBdLnJlcGxhY2UoL14gezR9L2dtLCAnJyk7CiAgICAgICAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHt0eXBlOiAnY29kZScsIHRleHQ6ICF0aGlzLm9wdGlvbnMucGVkYW50aWMgPyBjYXAucmVwbGFjZSgvXG4rJC8sICcnKSA6IGNhcH0pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNhcCA9IHRoaXMucnVsZXMuZmVuY2VzLmV4ZWMoc3JjKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe3R5cGU6ICdjb2RlJywgbGFuZzogY2FwWzJdLCB0ZXh0OiBjYXBbM119KTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLmhlYWRpbmcuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7dHlwZTogJ2hlYWRpbmcnLCBkZXB0aDogY2FwWzFdLmxlbmd0aCwgdGV4dDogY2FwWzJdfSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG9wICYmIChjYXAgPSB0aGlzLnJ1bGVzLm5wdGFibGUuZXhlYyhzcmMpKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RhYmxlJywKICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IGNhcFsxXS5yZXBsYWNlKC9eICp8ICpcfCAqJC9nLCAnJykuc3BsaXQoLyAqXHwgKi8pLAogICAgICAgICAgICAgICAgICAgIGFsaWduOiBjYXBbMl0ucmVwbGFjZSgvXiAqfFx8ICokL2csICcnKS5zcGxpdCgvICpcfCAqLyksCiAgICAgICAgICAgICAgICAgICAgY2VsbHM6IGNhcFszXS5yZXBsYWNlKC9cbiQvLCAnJykuc3BsaXQoJ1xuJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaXRlbS5hbGlnbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICgvXiAqLSs6ICokLy50ZXN0KGl0ZW0uYWxpZ25baV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWxpZ25baV0gPSAncmlnaHQnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14gKjotKzogKiQvLnRlc3QoaXRlbS5hbGlnbltpXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hbGlnbltpXSA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14gKjotKyAqJC8udGVzdChpdGVtLmFsaWduW2ldKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFsaWduW2ldID0gJ2xlZnQnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWxpZ25baV0gPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBpdGVtLmNlbGxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5jZWxsc1tpXSA9IGl0ZW0uY2VsbHNbaV0uc3BsaXQoLyAqXHwgKi8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy50b2tlbnMucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLmxoZWFkaW5nLmV4ZWMoc3JjKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe3R5cGU6ICdoZWFkaW5nJywgZGVwdGg6IGNhcFsyXSA9PT0gJz0nID8gMSA6IDIsIHRleHQ6IGNhcFsxXX0pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNhcCA9IHRoaXMucnVsZXMuaHIuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7dHlwZTogJ2hyJ30pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNhcCA9IHRoaXMucnVsZXMuYmxvY2txdW90ZS5leGVjKHNyYykpIHsKICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7CiAgICAgICAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHt0eXBlOiAnYmxvY2txdW90ZV9zdGFydCd9KTsKICAgICAgICAgICAgICAgIGNhcCA9IGNhcFswXS5yZXBsYWNlKC9eICo+ID8vZ20sICcnKTsKICAgICAgICAgICAgICAgIHRoaXMudG9rZW4oY2FwLCB0b3ApOwogICAgICAgICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7dHlwZTogJ2Jsb2NrcXVvdGVfZW5kJ30pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNhcCA9IHRoaXMucnVsZXMubGlzdC5leGVjKHNyYykpIHsKICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7CiAgICAgICAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHt0eXBlOiAnbGlzdF9zdGFydCcsIG9yZGVyZWQ6IGlzRmluaXRlKGNhcFsyXSl9KTsKICAgICAgICAgICAgICAgIGNhcCA9IGNhcFswXS5tYXRjaCh0aGlzLnJ1bGVzLml0ZW0pOwogICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbWFydExpc3RzKSB7CiAgICAgICAgICAgICAgICAgICAgYnVsbCA9IGJsb2NrLmJ1bGxldC5leGVjKGNhcFswXSlbMF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBuZXh0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBsID0gY2FwLmxlbmd0aDsKICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgZm9yICg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpdGVtID0gY2FwW2ldOwogICAgICAgICAgICAgICAgICAgIHNwYWNlID0gaXRlbS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0ucmVwbGFjZSgvXiAqKFsqKy1dfFxkK1wuKSArLywgJycpOwogICAgICAgICAgICAgICAgICAgIGlmICh+aXRlbS5pbmRleE9mKCdcbiAnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzcGFjZSAtPSBpdGVtLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9ICF0aGlzLm9wdGlvbnMucGVkYW50aWMgPyBpdGVtLnJlcGxhY2UobmV3IFJlZ0V4cCgnXiB7MSwnICsgc3BhY2UgKyAnfScsICdnbScpLCAnJykgOiBpdGVtLnJlcGxhY2UoL14gezEsNH0vZ20sICcnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbWFydExpc3RzICYmIGkgIT09IGwgLSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBibG9jay5idWxsZXQuZXhlYyhjYXBbaSArIDFdKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1bGwgIT09IGIgJiYgIShidWxsWzFdID09PSAnLicgJiYgYlsxXSA9PT0gJy4nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gY2FwLnNsaWNlKGkgKyAxKS5qb2luKCdcbicpICsgc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGwgLSAxOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxvb3NlID0gbmV4dCB8fCAvXG5cbig/IVxzKiQpLy50ZXN0KGl0ZW0pOwogICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBsIC0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gaXRlbVtpdGVtLmxlbmd0aCAtIDFdID09PSAnXG4nOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvb3NlKSBsb29zZSA9IG5leHQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe3R5cGU6IGxvb3NlID8gJ2xvb3NlX2l0ZW1fc3RhcnQnIDogJ2xpc3RfaXRlbV9zdGFydCd9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuKGl0ZW0sIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHt0eXBlOiAnbGlzdF9pdGVtX2VuZCd9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe3R5cGU6ICdsaXN0X2VuZCd9KTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLmh0bWwuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogdGhpcy5vcHRpb25zLnNhbml0aXplID8gJ3BhcmFncmFwaCcgOiAnaHRtbCcsCiAgICAgICAgICAgICAgICAgICAgcHJlOiBjYXBbMV0gPT09ICdwcmUnLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IGNhcFswXQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG9wICYmIChjYXAgPSB0aGlzLnJ1bGVzLmRlZi5leGVjKHNyYykpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgdGhpcy50b2tlbnMubGlua3NbY2FwWzFdLnRvTG93ZXJDYXNlKCldID0ge2hyZWY6IGNhcFsyXSwgdGl0bGU6IGNhcFszXX07CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG9wICYmIChjYXAgPSB0aGlzLnJ1bGVzLnRhYmxlLmV4ZWMoc3JjKSkpIHsKICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBpdGVtID0gewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0YWJsZScsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBjYXBbMV0ucmVwbGFjZSgvXiAqfCAqXHwgKiQvZywgJycpLnNwbGl0KC8gKlx8ICovKSwKICAgICAgICAgICAgICAgICAgICBhbGlnbjogY2FwWzJdLnJlcGxhY2UoL14gKnxcfCAqJC9nLCAnJykuc3BsaXQoLyAqXHwgKi8pLAogICAgICAgICAgICAgICAgICAgIGNlbGxzOiBjYXBbM10ucmVwbGFjZSgvKD86ICpcfCAqKT9cbiQvLCAnJykuc3BsaXQoJ1xuJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaXRlbS5hbGlnbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICgvXiAqLSs6ICokLy50ZXN0KGl0ZW0uYWxpZ25baV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWxpZ25baV0gPSAncmlnaHQnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14gKjotKzogKiQvLnRlc3QoaXRlbS5hbGlnbltpXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hbGlnbltpXSA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14gKjotKyAqJC8udGVzdChpdGVtLmFsaWduW2ldKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFsaWduW2ldID0gJ2xlZnQnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWxpZ25baV0gPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBpdGVtLmNlbGxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5jZWxsc1tpXSA9IGl0ZW0uY2VsbHNbaV0ucmVwbGFjZSgvXiAqXHwgKnwgKlx8ICokL2csICcnKS5zcGxpdCgvICpcfCAqLyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRvcCAmJiAoY2FwID0gdGhpcy5ydWxlcy5wYXJhZ3JhcGguZXhlYyhzcmMpKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IGNhcFsxXVtjYXBbMV0ubGVuZ3RoIC0gMV0gPT09ICdcbicgPyBjYXBbMV0uc2xpY2UoMCwgLTEpIDogY2FwWzFdCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLnRleHQuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgdGhpcy50b2tlbnMucHVzaCh7dHlwZTogJ3RleHQnLCB0ZXh0OiBjYXBbMF19KTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzcmMpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldwogICAgICAgICAgICAgICAgRXJyb3IoJ0luZmluaXRlIGxvb3Agb24gYnl0ZTogJyArIHNyYy5jaGFyQ29kZUF0KDApKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy50b2tlbnM7CiAgICB9OwogICAgdmFyIGlubGluZSA9IHsKICAgICAgICBlc2NhcGU6IC9eXFwoW1xcYCp7fVxbXF0oKSMrXC0uIV8+XSkvLAogICAgICAgIGF1dG9saW5rOiAvXjwoW14gPl0rKEB8OlwvKVteID5dKyk+LywKICAgICAgICB1cmw6IG5vb3AsCiAgICAgICAgdGFnOiAvXjwhLS1bXHNcU10qPy0tPnxePFwvP1x3Kyg/OiJbXiJdKiJ8J1teJ10qJ3xbXiciPl0pKj8+LywKICAgICAgICBsaW5rOiAvXiE/XFsoaW5zaWRlKVxdXChocmVmXCkvLAogICAgICAgIHJlZmxpbms6IC9eIT9cWyhpbnNpZGUpXF1ccypcWyhbXlxdXSopXF0vLAogICAgICAgIG5vbGluazogL14hP1xbKCg/OlxbW15cXV0qXF18W15cW1xdXSkqKVxdLywKICAgICAgICBzdHJvbmc6IC9eX18oW1xzXFNdKz8pX18oPyFfKXxeXCpcKihbXHNcU10rPylcKlwqKD8hXCopLywKICAgICAgICBlbTogL15cYl8oKD86X198W1xzXFNdKSs/KV9cYnxeXCooKD86XCpcKnxbXHNcU10pKz8pXCooPyFcKikvLAogICAgICAgIGNvZGU6IC9eKGArKVxzKihbXHNcU10qP1teYF0pXHMqXDEoPyFgKS8sCiAgICAgICAgYnI6IC9eIHsyLH1cbig/IVxzKiQpLywKICAgICAgICBkZWw6IG5vb3AsCiAgICAgICAgdGV4dDogL15bXHNcU10rPyg/PVtcXDwhXFtfKmBdfCB7Mix9XG58JCkvCiAgICB9OwogICAgaW5saW5lLl9pbnNpZGUgPSAvKD86XFtbXlxdXSpcXXxbXlxdXXxcXSg/PVteXFtdKlxdKSkqLzsKICAgIGlubGluZS5faHJlZiA9IC9ccyo8PyhbXlxzXSo/KT4/KD86XHMrWyciXShbXHNcU10qPylbJyJdKT9ccyovOwogICAgaW5saW5lLmxpbmsgPSByZXBsYWNlKGlubGluZS5saW5rKQogICAgKCdpbnNpZGUnLCBpbmxpbmUuX2luc2lkZSkKICAgICgnaHJlZicsIGlubGluZS5faHJlZikKICAgICgpOwogICAgaW5saW5lLnJlZmxpbmsgPSByZXBsYWNlKGlubGluZS5yZWZsaW5rKQogICAgKCdpbnNpZGUnLCBpbmxpbmUuX2luc2lkZSkKICAgICgpOwogICAgaW5saW5lLm5vcm1hbCA9IG1lcmdlKHt9LCBpbmxpbmUpOwogICAgaW5saW5lLnBlZGFudGljID0gbWVyZ2Uoe30sIGlubGluZS5ub3JtYWwsIHsKICAgICAgICBzdHJvbmc6IC9eX18oPz1cUykoW1xzXFNdKj9cUylfXyg/IV8pfF5cKlwqKD89XFMpKFtcc1xTXSo/XFMpXCpcKig/IVwqKS8sCiAgICAgICAgZW06IC9eXyg/PVxTKShbXHNcU10qP1xTKV8oPyFfKXxeXCooPz1cUykoW1xzXFNdKj9cUylcKig/IVwqKS8KICAgIH0pOwogICAgaW5saW5lLmdmbSA9IG1lcmdlKHt9LCBpbmxpbmUubm9ybWFsLCB7CiAgICAgICAgZXNjYXBlOiByZXBsYWNlKGlubGluZS5lc2NhcGUpKCddKScsICd+fF0pJykoKSwKICAgICAgICB1cmw6IC9eKGh0dHBzPzpcL1wvW15cczxdK1tePC4sOjsiJylcXVxzXSkvLAogICAgICAgIGRlbDogL15+fig/PVxTKShbXHNcU10qP1xTKX5+LywKICAgICAgICB0ZXh0OiByZXBsYWNlKGlubGluZS50ZXh0KQogICAgICAgICgnXXwnLCAnfl18JykKICAgICAgICAoJ3wnLCAnfGh0dHBzPzovL3wnKQogICAgICAgICgpCiAgICB9KTsKICAgIGlubGluZS5icmVha3MgPSBtZXJnZSh7fSwgaW5saW5lLmdmbSwgewogICAgICAgIGJyOiByZXBsYWNlKGlubGluZS5icikoJ3syLH0nLCAnKicpKCksCiAgICAgICAgdGV4dDogcmVwbGFjZShpbmxpbmUuZ2ZtLnRleHQpKCd7Mix9JywgJyonKSgpCiAgICB9KTsKICAgIGZ1bmN0aW9uIElubGluZUxleGVyKGxpbmtzLCBvcHRpb25zKSB7CiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCBtYXJrZWQuZGVmYXVsdHM7CiAgICAgICAgdGhpcy5saW5rcyA9IGxpbmtzOwogICAgICAgIHRoaXMucnVsZXMgPSBpbmxpbmUubm9ybWFsOwogICAgICAgIGlmICghdGhpcy5saW5rcykgewogICAgICAgICAgICB0aHJvdyBuZXcKICAgICAgICAgICAgRXJyb3IoJ1Rva2VucyBhcnJheSByZXF1aXJlcyBhIGBsaW5rc2AgcHJvcGVydHkuJyk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2ZtKSB7CiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYnJlYWtzKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJ1bGVzID0gaW5saW5lLmJyZWFrczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMucnVsZXMgPSBpbmxpbmUuZ2ZtOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMpIHsKICAgICAgICAgICAgdGhpcy5ydWxlcyA9IGlubGluZS5wZWRhbnRpYzsKICAgICAgICB9CiAgICB9CgogICAgSW5saW5lTGV4ZXIucnVsZXMgPSBpbmxpbmU7CiAgICBJbmxpbmVMZXhlci5vdXRwdXQgPSBmdW5jdGlvbiAoc3JjLCBsaW5rcywgb3B0KSB7CiAgICAgICAgdmFyIGlubGluZSA9IG5ldyBJbmxpbmVMZXhlcihsaW5rcywgb3B0KTsKICAgICAgICByZXR1cm4gaW5saW5lLm91dHB1dChzcmMpOwogICAgfTsKICAgIElubGluZUxleGVyLnByb3RvdHlwZS5vdXRwdXQgPSBmdW5jdGlvbiAoc3JjKSB7CiAgICAgICAgdmFyIG91dCA9ICcnLCBsaW5rLCB0ZXh0LCBocmVmLCBjYXA7CiAgICAgICAgd2hpbGUgKHNyYykgewogICAgICAgICAgICBpZiAoY2FwID0gdGhpcy5ydWxlcy5lc2NhcGUuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgb3V0ICs9IGNhcFsxXTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLmF1dG9saW5rLmV4ZWMoc3JjKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGlmIChjYXBbMl0gPT09ICdAJykgewogICAgICAgICAgICAgICAgICAgIHRleHQgPSBjYXBbMV1bNl0gPT09ICc6JyA/IHRoaXMubWFuZ2xlKGNhcFsxXS5zdWJzdHJpbmcoNykpIDogdGhpcy5tYW5nbGUoY2FwWzFdKTsKICAgICAgICAgICAgICAgICAgICBocmVmID0gdGhpcy5tYW5nbGUoJ21haWx0bzonKSArIHRleHQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRleHQgPSBlc2NhcGUoY2FwWzFdKTsKICAgICAgICAgICAgICAgICAgICBocmVmID0gdGV4dDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG91dCArPSAnPGEgaHJlZj0iJwogICAgICAgICAgICAgICAgICAgICsgaHJlZgogICAgICAgICAgICAgICAgICAgICsgJyI+JwogICAgICAgICAgICAgICAgICAgICsgdGV4dAogICAgICAgICAgICAgICAgICAgICsgJzwvYT4nOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNhcCA9IHRoaXMucnVsZXMudXJsLmV4ZWMoc3JjKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIHRleHQgPSBlc2NhcGUoY2FwWzFdKTsKICAgICAgICAgICAgICAgIGhyZWYgPSB0ZXh0OwogICAgICAgICAgICAgICAgb3V0ICs9ICc8YSBocmVmPSInCiAgICAgICAgICAgICAgICAgICAgKyBocmVmCiAgICAgICAgICAgICAgICAgICAgKyAnIj4nCiAgICAgICAgICAgICAgICAgICAgKyB0ZXh0CiAgICAgICAgICAgICAgICAgICAgKyAnPC9hPic7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2FwID0gdGhpcy5ydWxlcy50YWcuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgb3V0ICs9IHRoaXMub3B0aW9ucy5zYW5pdGl6ZSA/IGVzY2FwZShjYXBbMF0pIDogY2FwWzBdOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNhcCA9IHRoaXMucnVsZXMubGluay5leGVjKHNyYykpIHsKICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBvdXQgKz0gdGhpcy5vdXRwdXRMaW5rKGNhcCwge2hyZWY6IGNhcFsyXSwgdGl0bGU6IGNhcFszXX0pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKChjYXAgPSB0aGlzLnJ1bGVzLnJlZmxpbmsuZXhlYyhzcmMpKSB8fCAoY2FwID0gdGhpcy5ydWxlcy5ub2xpbmsuZXhlYyhzcmMpKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGxpbmsgPSAoY2FwWzJdIHx8IGNhcFsxXSkucmVwbGFjZSgvXHMrL2csICcgJyk7CiAgICAgICAgICAgICAgICBsaW5rID0gdGhpcy5saW5rc1tsaW5rLnRvTG93ZXJDYXNlKCldOwogICAgICAgICAgICAgICAgaWYgKCFsaW5rIHx8ICFsaW5rLmhyZWYpIHsKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gY2FwWzBdWzBdOwogICAgICAgICAgICAgICAgICAgIHNyYyA9IGNhcFswXS5zdWJzdHJpbmcoMSkgKyBzcmM7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBvdXQgKz0gdGhpcy5vdXRwdXRMaW5rKGNhcCwgbGluayk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2FwID0gdGhpcy5ydWxlcy5zdHJvbmcuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgb3V0ICs9ICc8c3Ryb25nPicKICAgICAgICAgICAgICAgICAgICArIHRoaXMub3V0cHV0KGNhcFsyXSB8fCBjYXBbMV0pCiAgICAgICAgICAgICAgICAgICAgKyAnPC9zdHJvbmc+JzsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLmVtLmV4ZWMoc3JjKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIG91dCArPSAnPGVtPicKICAgICAgICAgICAgICAgICAgICArIHRoaXMub3V0cHV0KGNhcFsyXSB8fCBjYXBbMV0pCiAgICAgICAgICAgICAgICAgICAgKyAnPC9lbT4nOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNhcCA9IHRoaXMucnVsZXMuY29kZS5leGVjKHNyYykpIHsKICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBvdXQgKz0gJzxjb2RlPicKICAgICAgICAgICAgICAgICAgICArIGVzY2FwZShjYXBbMl0sIHRydWUpCiAgICAgICAgICAgICAgICAgICAgKyAnPC9jb2RlPic7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2FwID0gdGhpcy5ydWxlcy5ici5leGVjKHNyYykpIHsKICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcoY2FwWzBdLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBvdXQgKz0gJzxicj4nOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNhcCA9IHRoaXMucnVsZXMuZGVsLmV4ZWMoc3JjKSkgewogICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhjYXBbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIG91dCArPSAnPGRlbD4nCiAgICAgICAgICAgICAgICAgICAgKyB0aGlzLm91dHB1dChjYXBbMV0pCiAgICAgICAgICAgICAgICAgICAgKyAnPC9kZWw+JzsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjYXAgPSB0aGlzLnJ1bGVzLnRleHQuZXhlYyhzcmMpKSB7CiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKGNhcFswXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgb3V0ICs9IGVzY2FwZShjYXBbMF0pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNyYykgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3CiAgICAgICAgICAgICAgICBFcnJvcignSW5maW5pdGUgbG9vcCBvbiBieXRlOiAnICsgc3JjLmNoYXJDb2RlQXQoMCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBvdXQ7CiAgICB9OwogICAgSW5saW5lTGV4ZXIucHJvdG90eXBlLm91dHB1dExpbmsgPSBmdW5jdGlvbiAoY2FwLCBsaW5rKSB7CiAgICAgICAgaWYgKGNhcFswXVswXSAhPT0gJyEnKSB7CiAgICAgICAgICAgIHJldHVybiAnPGEgaHJlZj0iJwogICAgICAgICAgICAgICAgKyBlc2NhcGUobGluay5ocmVmKQogICAgICAgICAgICAgICAgKyAnIicKICAgICAgICAgICAgICAgICsgKGxpbmsudGl0bGUgPyAnIHRpdGxlPSInCiAgICAgICAgICAgICAgICAgICAgKyBlc2NhcGUobGluay50aXRsZSkKICAgICAgICAgICAgICAgICAgICArICciJyA6ICcnKQogICAgICAgICAgICAgICAgKyAnPicKICAgICAgICAgICAgICAgICsgdGhpcy5vdXRwdXQoY2FwWzFdKQogICAgICAgICAgICAgICAgKyAnPC9hPic7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICc8aW1nIHNyYz0iJwogICAgICAgICAgICAgICAgKyBlc2NhcGUobGluay5ocmVmKQogICAgICAgICAgICAgICAgKyAnIiBhbHQ9IicKICAgICAgICAgICAgICAgICsgZXNjYXBlKGNhcFsxXSkKICAgICAgICAgICAgICAgICsgJyInCiAgICAgICAgICAgICAgICArIChsaW5rLnRpdGxlID8gJyB0aXRsZT0iJwogICAgICAgICAgICAgICAgICAgICsgZXNjYXBlKGxpbmsudGl0bGUpCiAgICAgICAgICAgICAgICAgICAgKyAnIicgOiAnJykKICAgICAgICAgICAgICAgICsgJz4nOwogICAgICAgIH0KICAgIH07CiAgICBJbmxpbmVMZXhlci5wcm90b3R5cGUubWFuZ2xlID0gZnVuY3Rpb24gKHRleHQpIHsKICAgICAgICB2YXIgb3V0ID0gJycsIGwgPSB0ZXh0Lmxlbmd0aCwgaSA9IDAsIGNoOwogICAgICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAgIGNoID0gdGV4dC5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkgewogICAgICAgICAgICAgICAgY2ggPSAneCcgKyBjaC50b1N0cmluZygxNik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3V0ICs9ICcmIycgKyBjaCArICc7JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgIH07CiAgICBmdW5jdGlvbiBQYXJzZXIob3B0aW9ucykgewogICAgICAgIHRoaXMudG9rZW5zID0gW107CiAgICAgICAgdGhpcy50b2tlbiA9IG51bGw7CiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCBtYXJrZWQuZGVmYXVsdHM7CiAgICB9CgogICAgUGFyc2VyLnBhcnNlID0gZnVuY3Rpb24gKHNyYywgb3B0aW9ucykgewogICAgICAgIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKG9wdGlvbnMpOwogICAgICAgIHJldHVybiBwYXJzZXIucGFyc2Uoc3JjKTsKICAgIH07CiAgICBQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKHNyYykgewogICAgICAgIHRoaXMuaW5saW5lID0gbmV3IElubGluZUxleGVyKHNyYy5saW5rcywgdGhpcy5vcHRpb25zKTsKICAgICAgICB0aGlzLnRva2VucyA9IHNyYy5yZXZlcnNlKCk7CiAgICAgICAgdmFyIG91dCA9ICcnOwogICAgICAgIHdoaWxlICh0aGlzLm5leHQoKSkgewogICAgICAgICAgICBvdXQgKz0gdGhpcy50b2soKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgIH07CiAgICBQYXJzZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW4gPSB0aGlzLnRva2Vucy5wb3AoKTsKICAgIH07CiAgICBQYXJzZXIucHJvdG90eXBlLnBlZWsgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aCAtIDFdIHx8IDA7CiAgICB9OwogICAgUGFyc2VyLnByb3RvdHlwZS5wYXJzZVRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGJvZHkgPSB0aGlzLnRva2VuLnRleHQ7CiAgICAgICAgd2hpbGUgKHRoaXMucGVlaygpLnR5cGUgPT09ICd0ZXh0JykgewogICAgICAgICAgICBib2R5ICs9ICdcbicgKyB0aGlzLm5leHQoKS50ZXh0OwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5pbmxpbmUub3V0cHV0KGJvZHkpOwogICAgfTsKICAgIFBhcnNlci5wcm90b3R5cGUudG9rID0gZnVuY3Rpb24gKCkgewogICAgICAgIHN3aXRjaCAodGhpcy50b2tlbi50eXBlKSB7CiAgICAgICAgICAgIGNhc2Unc3BhY2UnOiB7CiAgICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSdocic6IHsKICAgICAgICAgICAgICAgIHJldHVybiAnPGhyPlxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlJ2hlYWRpbmcnOiB7CiAgICAgICAgICAgICAgICByZXR1cm4gJzxoJwogICAgICAgICAgICAgICAgICAgICsgdGhpcy50b2tlbi5kZXB0aAogICAgICAgICAgICAgICAgICAgICsgJz4nCiAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmlubGluZS5vdXRwdXQodGhpcy50b2tlbi50ZXh0KQogICAgICAgICAgICAgICAgICAgICsgJzwvaCcKICAgICAgICAgICAgICAgICAgICArIHRoaXMudG9rZW4uZGVwdGgKICAgICAgICAgICAgICAgICAgICArICc+XG4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UnY29kZSc6IHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSB0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KHRoaXMudG9rZW4udGV4dCwgdGhpcy50b2tlbi5sYW5nKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSAhPSBudWxsICYmIGNvZGUgIT09IHRoaXMudG9rZW4udGV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuLmVzY2FwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuLnRleHQgPSBjb2RlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghdGhpcy50b2tlbi5lc2NhcGVkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2tlbi50ZXh0ID0gZXNjYXBlKHRoaXMudG9rZW4udGV4dCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gJzxwcmU+PGNvZGUnCiAgICAgICAgICAgICAgICAgICAgKyAodGhpcy50b2tlbi5sYW5nID8gJyBjbGFzcz0iJwogICAgICAgICAgICAgICAgICAgICAgICArIHRoaXMub3B0aW9ucy5sYW5nUHJlZml4CiAgICAgICAgICAgICAgICAgICAgICAgICsgdGhpcy50b2tlbi5sYW5nCiAgICAgICAgICAgICAgICAgICAgICAgICsgJyInIDogJycpCiAgICAgICAgICAgICAgICAgICAgKyAnPicKICAgICAgICAgICAgICAgICAgICArIHRoaXMudG9rZW4udGV4dAogICAgICAgICAgICAgICAgICAgICsgJzwvY29kZT48L3ByZT5cbic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSd0YWJsZSc6IHsKICAgICAgICAgICAgICAgIHZhciBib2R5ID0gJycsIGhlYWRpbmcsIGksIHJvdywgY2VsbCwgajsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzx0aGVhZD5cbjx0cj5cbic7CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50b2tlbi5oZWFkZXIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBoZWFkaW5nID0gdGhpcy5pbmxpbmUub3V0cHV0KHRoaXMudG9rZW4uaGVhZGVyW2ldKTsKICAgICAgICAgICAgICAgICAgICBib2R5ICs9IHRoaXMudG9rZW4uYWxpZ25baV0gPyAnPHRoIGFsaWduPSInICsgdGhpcy50b2tlbi5hbGlnbltpXSArICciPicgKyBoZWFkaW5nICsgJzwvdGg+XG4nIDogJzx0aD4nICsgaGVhZGluZyArICc8L3RoPlxuJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJvZHkgKz0gJzwvdHI+XG48L3RoZWFkPlxuJzsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzx0Ym9keT5cbicKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnRva2VuLmNlbGxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgcm93ID0gdGhpcy50b2tlbi5jZWxsc1tpXTsKICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8dHI+XG4nOwogICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCByb3cubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2VsbCA9IHRoaXMuaW5saW5lLm91dHB1dChyb3dbal0pOwogICAgICAgICAgICAgICAgICAgICAgICBib2R5ICs9IHRoaXMudG9rZW4uYWxpZ25bal0gPyAnPHRkIGFsaWduPSInICsgdGhpcy50b2tlbi5hbGlnbltqXSArICciPicgKyBjZWxsICsgJzwvdGQ+XG4nIDogJzx0ZD4nICsgY2VsbCArICc8L3RkPlxuJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYm9keSArPSAnPC90cj5cbic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8L3Rib2R5PlxuJzsKICAgICAgICAgICAgICAgIHJldHVybiAnPHRhYmxlPlxuJwogICAgICAgICAgICAgICAgICAgICsgYm9keQogICAgICAgICAgICAgICAgICAgICsgJzwvdGFibGU+XG4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UnYmxvY2txdW90ZV9zdGFydCc6IHsKICAgICAgICAgICAgICAgIHZhciBib2R5ID0gJyc7CiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5uZXh0KCkudHlwZSAhPT0gJ2Jsb2NrcXVvdGVfZW5kJykgewogICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gdGhpcy50b2soKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAnPGJsb2NrcXVvdGU+XG4nCiAgICAgICAgICAgICAgICAgICAgKyBib2R5CiAgICAgICAgICAgICAgICAgICAgKyAnPC9ibG9ja3F1b3RlPlxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlJ2xpc3Rfc3RhcnQnOiB7CiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMudG9rZW4ub3JkZXJlZCA/ICdvbCcgOiAndWwnLCBib2R5ID0gJyc7CiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5uZXh0KCkudHlwZSAhPT0gJ2xpc3RfZW5kJykgewogICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gdGhpcy50b2soKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAnPCcKICAgICAgICAgICAgICAgICAgICArIHR5cGUKICAgICAgICAgICAgICAgICAgICArICc+XG4nCiAgICAgICAgICAgICAgICAgICAgKyBib2R5CiAgICAgICAgICAgICAgICAgICAgKyAnPC8nCiAgICAgICAgICAgICAgICAgICAgKyB0eXBlCiAgICAgICAgICAgICAgICAgICAgKyAnPlxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlJ2xpc3RfaXRlbV9zdGFydCc6IHsKICAgICAgICAgICAgICAgIHZhciBib2R5ID0gJyc7CiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5uZXh0KCkudHlwZSAhPT0gJ2xpc3RfaXRlbV9lbmQnKSB7CiAgICAgICAgICAgICAgICAgICAgYm9keSArPSB0aGlzLnRva2VuLnR5cGUgPT09ICd0ZXh0JyA/IHRoaXMucGFyc2VUZXh0KCkgOiB0aGlzLnRvaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICc8bGk+JwogICAgICAgICAgICAgICAgICAgICsgYm9keQogICAgICAgICAgICAgICAgICAgICsgJzwvbGk+XG4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UnbG9vc2VfaXRlbV9zdGFydCc6IHsKICAgICAgICAgICAgICAgIHZhciBib2R5ID0gJyc7CiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5uZXh0KCkudHlwZSAhPT0gJ2xpc3RfaXRlbV9lbmQnKSB7CiAgICAgICAgICAgICAgICAgICAgYm9keSArPSB0aGlzLnRvaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICc8bGk+JwogICAgICAgICAgICAgICAgICAgICsgYm9keQogICAgICAgICAgICAgICAgICAgICsgJzwvbGk+XG4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UnaHRtbCc6IHsKICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy50b2tlbi5wcmUgJiYgIXRoaXMub3B0aW9ucy5wZWRhbnRpYyA/IHRoaXMuaW5saW5lLm91dHB1dCh0aGlzLnRva2VuLnRleHQpIDogdGhpcy50b2tlbi50ZXh0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UncGFyYWdyYXBoJzogewogICAgICAgICAgICAgICAgcmV0dXJuICc8cD4nCiAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmlubGluZS5vdXRwdXQodGhpcy50b2tlbi50ZXh0KQogICAgICAgICAgICAgICAgICAgICsgJzwvcD5cbic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSd0ZXh0JzogewogICAgICAgICAgICAgICAgcmV0dXJuICc8cD4nCiAgICAgICAgICAgICAgICAgICAgKyB0aGlzLnBhcnNlVGV4dCgpCiAgICAgICAgICAgICAgICAgICAgKyAnPC9wPlxuJzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBmdW5jdGlvbiBlc2NhcGUoaHRtbCwgZW5jb2RlKSB7CiAgICAgICAgcmV0dXJuIGh0bWwucmVwbGFjZSghZW5jb2RlID8gLyYoPyEjP1x3KzspL2cgOiAvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpLnJlcGxhY2UoLyIvZywgJyZxdW90OycpLnJlcGxhY2UoLycvZywgJyYjMzk7Jyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVwbGFjZShyZWdleCwgb3B0KSB7CiAgICAgICAgcmVnZXggPSByZWdleC5zb3VyY2U7CiAgICAgICAgb3B0ID0gb3B0IHx8ICcnOwogICAgICAgIHJldHVybiBmdW5jdGlvbiBzZWxmKG5hbWUsIHZhbCkgewogICAgICAgICAgICBpZiAoIW5hbWUpcmV0dXJuIG5ldyBSZWdFeHAocmVnZXgsIG9wdCk7CiAgICAgICAgICAgIHZhbCA9IHZhbC5zb3VyY2UgfHwgdmFsOwogICAgICAgICAgICB2YWwgPSB2YWwucmVwbGFjZSgvKF58W15cW10pXF4vZywgJyQxJyk7CiAgICAgICAgICAgIHJlZ2V4ID0gcmVnZXgucmVwbGFjZShuYW1lLCB2YWwpOwogICAgICAgICAgICByZXR1cm4gc2VsZjsKICAgICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIG5vb3AoKSB7CiAgICB9CgogICAgbm9vcC5leGVjID0gbm9vcDsKICAgIGZ1bmN0aW9uIG1lcmdlKG9iaikgewogICAgICAgIHZhciBpID0gMSwgdGFyZ2V0LCBrZXk7CiAgICAgICAgZm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGFyZ2V0ID0gYXJndW1lbnRzW2ldOwogICAgICAgICAgICBmb3IgKGtleSBpbiB0YXJnZXQpIHsKICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSB0YXJnZXRba2V5XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gb2JqOwogICAgfQoKICAgIGZ1bmN0aW9uIG1hcmtlZChzcmMsIG9wdCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmIChvcHQpIG9wdCA9IG1lcmdlKHt9LCBtYXJrZWQuZGVmYXVsdHMsIG9wdCk7CiAgICAgICAgICAgIHJldHVybiBQYXJzZXIucGFyc2UoTGV4ZXIubGV4KHNyYywgb3B0KSwgb3B0KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGUubWVzc2FnZSArPSAnXG5QbGVhc2UgcmVwb3J0IHRoaXMgdG8gaHR0cHM6Ly9naXRodWIuY29tL2NoamovbWFya2VkLic7CiAgICAgICAgICAgIGlmICgob3B0IHx8IG1hcmtlZC5kZWZhdWx0cykuc2lsZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ0FuIGVycm9yIG9jY3VyZWQ6XG4nICsgZS5tZXNzYWdlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfQoKICAgIG1hcmtlZC5vcHRpb25zID0gbWFya2VkLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0KSB7CiAgICAgICAgbWVyZ2UobWFya2VkLmRlZmF1bHRzLCBvcHQpOwogICAgICAgIHJldHVybiBtYXJrZWQ7CiAgICB9OwogICAgbWFya2VkLmRlZmF1bHRzID0gewogICAgICAgIGdmbTogdHJ1ZSwKICAgICAgICB0YWJsZXM6IHRydWUsCiAgICAgICAgYnJlYWtzOiBmYWxzZSwKICAgICAgICBwZWRhbnRpYzogZmFsc2UsCiAgICAgICAgc2FuaXRpemU6IGZhbHNlLAogICAgICAgIHNtYXJ0TGlzdHM6IGZhbHNlLAogICAgICAgIHNpbGVudDogZmFsc2UsCiAgICAgICAgaGlnaGxpZ2h0OiBudWxsLAogICAgICAgIGxhbmdQcmVmaXg6ICdsYW5nLScKICAgIH07CiAgICBtYXJrZWQuUGFyc2VyID0gUGFyc2VyOwogICAgbWFya2VkLnBhcnNlciA9IFBhcnNlci5wYXJzZTsKICAgIG1hcmtlZC5MZXhlciA9IExleGVyOwogICAgbWFya2VkLmxleGVyID0gTGV4ZXIubGV4OwogICAgbWFya2VkLklubGluZUxleGVyID0gSW5saW5lTGV4ZXI7CiAgICBtYXJrZWQuaW5saW5lTGV4ZXIgPSBJbmxpbmVMZXhlci5vdXRwdXQ7CiAgICBtYXJrZWQucGFyc2UgPSBtYXJrZWQ7CiAgICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBtYXJrZWQ7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgICAgIGRlZmluZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBtYXJrZWQ7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWFya2VkID0gbWFya2VkOwogICAgfQp9KS5jYWxsKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzIHx8ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IGdsb2JhbCk7Cn0oKSk7Ci8vIENvcHlyaWdodCAoQykgMjAwNiBHb29nbGUgSW5jLgovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKLy8KLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAovLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCndpbmRvd1snUFJfU0hPVUxEX1VTRV9DT05USU5VQVRJT04nXSA9IHRydWU7CnZhciBwcmV0dHlQcmludE9uZTsKdmFyIHByZXR0eVByaW50OwooZnVuY3Rpb24gKCkgewogICAgdmFyIHdpbiA9IHdpbmRvdzsKICAgIHZhciBGTE9XX0NPTlRST0xfS0VZV09SRFMgPSBbImJyZWFrLGNvbnRpbnVlLGRvLGVsc2UsZm9yLGlmLHJldHVybix3aGlsZSJdOwogICAgdmFyIENfS0VZV09SRFMgPSBbRkxPV19DT05UUk9MX0tFWVdPUkRTLCAiYXV0byxjYXNlLGNoYXIsY29uc3QsZGVmYXVsdCwiICsgImRvdWJsZSxlbnVtLGV4dGVybixmbG9hdCxnb3RvLGludCxsb25nLHJlZ2lzdGVyLHNob3J0LHNpZ25lZCxzaXplb2YsIiArICJzdGF0aWMsc3RydWN0LHN3aXRjaCx0eXBlZGVmLHVuaW9uLHVuc2lnbmVkLHZvaWQsdm9sYXRpbGUiXTsKICAgIHZhciBDT01NT05fS0VZV09SRFMgPSBbQ19LRVlXT1JEUywgImNhdGNoLGNsYXNzLGRlbGV0ZSxmYWxzZSxpbXBvcnQsIiArICJuZXcsb3BlcmF0b3IscHJpdmF0ZSxwcm90ZWN0ZWQscHVibGljLHRoaXMsdGhyb3csdHJ1ZSx0cnksdHlwZW9mIl07CiAgICB2YXIgQ1BQX0tFWVdPUkRTID0gW0NPTU1PTl9LRVlXT1JEUywgImFsaWdub2YsYWxpZ25fdW5pb24sYXNtLGF4aW9tLGJvb2wsIiArICJjb25jZXB0LGNvbmNlcHRfbWFwLGNvbnN0X2Nhc3QsY29uc3RleHByLGRlY2x0eXBlLCIgKyAiZHluYW1pY19jYXN0LGV4cGxpY2l0LGV4cG9ydCxmcmllbmQsaW5saW5lLGxhdGVfY2hlY2ssIiArICJtdXRhYmxlLG5hbWVzcGFjZSxudWxscHRyLHJlaW50ZXJwcmV0X2Nhc3Qsc3RhdGljX2Fzc2VydCxzdGF0aWNfY2FzdCwiICsgInRlbXBsYXRlLHR5cGVpZCx0eXBlbmFtZSx1c2luZyx2aXJ0dWFsLHdoZXJlIl07CiAgICB2YXIgSkFWQV9LRVlXT1JEUyA9IFtDT01NT05fS0VZV09SRFMsICJhYnN0cmFjdCxib29sZWFuLGJ5dGUsZXh0ZW5kcyxmaW5hbCxmaW5hbGx5LGltcGxlbWVudHMsaW1wb3J0LCIgKyAiaW5zdGFuY2VvZixudWxsLG5hdGl2ZSxwYWNrYWdlLHN0cmljdGZwLHN1cGVyLHN5bmNocm9uaXplZCx0aHJvd3MsIiArICJ0cmFuc2llbnQiXTsKICAgIHZhciBDU0hBUlBfS0VZV09SRFMgPSBbSkFWQV9LRVlXT1JEUywgImFzLGJhc2UsYnksY2hlY2tlZCxkZWNpbWFsLGRlbGVnYXRlLGRlc2NlbmRpbmcsZHluYW1pYyxldmVudCwiICsgImZpeGVkLGZvcmVhY2gsZnJvbSxncm91cCxpbXBsaWNpdCxpbixpbnRlcmZhY2UsaW50ZXJuYWwsaW50byxpcyxsZXQsIiArICJsb2NrLG9iamVjdCxvdXQsb3ZlcnJpZGUsb3JkZXJieSxwYXJhbXMscGFydGlhbCxyZWFkb25seSxyZWYsc2J5dGUsIiArICJzZWFsZWQsc3RhY2thbGxvYyxzdHJpbmcsc2VsZWN0LHVpbnQsdWxvbmcsdW5jaGVja2VkLHVuc2FmZSx1c2hvcnQsIiArICJ2YXIsdmlydHVhbCx3aGVyZSJdOwogICAgdmFyIENPRkZFRV9LRVlXT1JEUyA9ICJhbGwsYW5kLGJ5LGNhdGNoLGNsYXNzLGVsc2UsZXh0ZW5kcyxmYWxzZSxmaW5hbGx5LCIgKyAiZm9yLGlmLGluLGlzLGlzbnQsbG9vcCxuZXcsbm8sbm90LG51bGwsb2Ysb2ZmLG9uLG9yLHJldHVybixzdXBlcix0aGVuLCIgKyAidGhyb3csdHJ1ZSx0cnksdW5sZXNzLHVudGlsLHdoZW4sd2hpbGUseWVzIjsKICAgIHZhciBKU0NSSVBUX0tFWVdPUkRTID0gW0NPTU1PTl9LRVlXT1JEUywgImRlYnVnZ2VyLGV2YWwsZXhwb3J0LGZ1bmN0aW9uLGdldCxudWxsLHNldCx1bmRlZmluZWQsdmFyLHdpdGgsIiArICJJbmZpbml0eSxOYU4iXTsKICAgIHZhciBQRVJMX0tFWVdPUkRTID0gImNhbGxlcixkZWxldGUsZGllLGRvLGR1bXAsZWxzaWYsZXZhbCxleGl0LGZvcmVhY2gsZm9yLCIgKyAiZ290byxpZixpbXBvcnQsbGFzdCxsb2NhbCxteSxuZXh0LG5vLG91cixwcmludCxwYWNrYWdlLHJlZG8scmVxdWlyZSwiICsgInN1Yix1bmRlZix1bmxlc3MsdW50aWwsdXNlLHdhbnRhcnJheSx3aGlsZSxCRUdJTixFTkQiOwogICAgdmFyIFBZVEhPTl9LRVlXT1JEUyA9IFtGTE9XX0NPTlRST0xfS0VZV09SRFMsICJhbmQsYXMsYXNzZXJ0LGNsYXNzLGRlZixkZWwsIiArICJlbGlmLGV4Y2VwdCxleGVjLGZpbmFsbHksZnJvbSxnbG9iYWwsaW1wb3J0LGluLGlzLGxhbWJkYSwiICsgIm5vbmxvY2FsLG5vdCxvcixwYXNzLHByaW50LHJhaXNlLHRyeSx3aXRoLHlpZWxkLCIgKyAiRmFsc2UsVHJ1ZSxOb25lIl07CiAgICB2YXIgUlVCWV9LRVlXT1JEUyA9IFtGTE9XX0NPTlRST0xfS0VZV09SRFMsICJhbGlhcyxhbmQsYmVnaW4sY2FzZSxjbGFzcywiICsgImRlZixkZWZpbmVkLGVsc2lmLGVuZCxlbnN1cmUsZmFsc2UsaW4sbW9kdWxlLG5leHQsbmlsLG5vdCxvcixyZWRvLCIgKyAicmVzY3VlLHJldHJ5LHNlbGYsc3VwZXIsdGhlbix0cnVlLHVuZGVmLHVubGVzcyx1bnRpbCx3aGVuLHlpZWxkLCIgKyAiQkVHSU4sRU5EIl07CiAgICB2YXIgU0hfS0VZV09SRFMgPSBbRkxPV19DT05UUk9MX0tFWVdPUkRTLCAiY2FzZSxkb25lLGVsaWYsZXNhYyxldmFsLGZpLCIgKyAiZnVuY3Rpb24saW4sbG9jYWwsc2V0LHRoZW4sdW50aWwiXTsKICAgIHZhciBBTExfS0VZV09SRFMgPSBbQ1BQX0tFWVdPUkRTLCBDU0hBUlBfS0VZV09SRFMsIEpTQ1JJUFRfS0VZV09SRFMsIFBFUkxfS0VZV09SRFMgKwogICAgUFlUSE9OX0tFWVdPUkRTLCBSVUJZX0tFWVdPUkRTLCBTSF9LRVlXT1JEU107CiAgICB2YXIgQ19UWVBFUyA9IC9eKERJUnxGSUxFfHZlY3RvcnwoZGV8cHJpb3JpdHlfKT9xdWV1ZXxsaXN0fHN0YWNrfChjb25zdF8pP2l0ZXJhdG9yfChtdWx0aSk/KHNldHxtYXApfGJpdHNldHx1PyhpbnR8ZmxvYXQpXGQqKVxiLzsKICAgIHZhciBQUl9TVFJJTkcgPSAnc3RyJzsKICAgIHZhciBQUl9LRVlXT1JEID0gJ2t3ZCc7CiAgICB2YXIgUFJfQ09NTUVOVCA9ICdjb20nOwogICAgdmFyIFBSX1RZUEUgPSAndHlwJzsKICAgIHZhciBQUl9MSVRFUkFMID0gJ2xpdCc7CiAgICB2YXIgUFJfUFVOQ1RVQVRJT04gPSAncHVuJzsKICAgIHZhciBQUl9QTEFJTiA9ICdwbG4nOwogICAgdmFyIFBSX1RBRyA9ICd0YWcnOwogICAgdmFyIFBSX0RFQ0xBUkFUSU9OID0gJ2RlYyc7CiAgICB2YXIgUFJfU09VUkNFID0gJ3NyYyc7CiAgICB2YXIgUFJfQVRUUklCX05BTUUgPSAnYXRuJzsKICAgIHZhciBQUl9BVFRSSUJfVkFMVUUgPSAnYXR2JzsKICAgIHZhciBQUl9OT0NPREUgPSAnbm9jb2RlJzsKICAgIHZhciBSRUdFWFBfUFJFQ0VERVJfUEFUVEVSTiA9ICcoPzpeXlxcLj98WystXXxbIT1dPT89P3xcXCN8JT0/fCYmPz0/fFxcKHxcXCo9P3xbK1xcLV09fC0+fFxcLz0/fDo6P3w8PD89P3w+Pj8+Pz0/fCx8O3xcXD98QHxcXFt8fnx7fFxcXlxcXj89P3xcXHxcXHw/PT98YnJlYWt8Y2FzZXxjb250aW51ZXxkZWxldGV8ZG98ZWxzZXxmaW5hbGx5fGluc3RhbmNlb2Z8cmV0dXJufHRocm93fHRyeXx0eXBlb2YpXFxzKic7CgogICAgZnVuY3Rpb24gY29tYmluZVByZWZpeFBhdHRlcm5zKHJlZ2V4cykgewogICAgICAgIHZhciBjYXB0dXJlZEdyb3VwSW5kZXggPSAwOwogICAgICAgIHZhciBuZWVkVG9Gb2xkQ2FzZSA9IGZhbHNlOwogICAgICAgIHZhciBpZ25vcmVDYXNlID0gZmFsc2U7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSByZWdleHMubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICAgIHZhciByZWdleCA9IHJlZ2V4c1tpXTsKICAgICAgICAgICAgaWYgKHJlZ2V4Lmlnbm9yZUNhc2UpIHsKICAgICAgICAgICAgICAgIGlnbm9yZUNhc2UgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKC9bYS16XS9pLnRlc3QocmVnZXguc291cmNlLnJlcGxhY2UoL1xcdVswLTlhLWZdezR9fFxceFswLTlhLWZdezJ9fFxcW151eF0vZ2ksICcnKSkpIHsKICAgICAgICAgICAgICAgIG5lZWRUb0ZvbGRDYXNlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlnbm9yZUNhc2UgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciBlc2NhcGVDaGFyVG9Db2RlVW5pdCA9IHsnYic6IDgsICd0JzogOSwgJ24nOiAweGEsICd2JzogMHhiLCAnZic6IDB4YywgJ3InOiAweGR9OwoKICAgICAgICBmdW5jdGlvbiBkZWNvZGVFc2NhcGUoY2hhcnNldFBhcnQpIHsKICAgICAgICAgICAgdmFyIGNjMCA9IGNoYXJzZXRQYXJ0LmNoYXJDb2RlQXQoMCk7CiAgICAgICAgICAgIGlmIChjYzAgIT09IDkyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY2MwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBjMSA9IGNoYXJzZXRQYXJ0LmNoYXJBdCgxKTsKICAgICAgICAgICAgY2MwID0gZXNjYXBlQ2hhclRvQ29kZVVuaXRbYzFdOwogICAgICAgICAgICBpZiAoY2MwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY2MwOwogICAgICAgICAgICB9IGVsc2UgaWYgKCcwJyA8PSBjMSAmJiBjMSA8PSAnNycpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChjaGFyc2V0UGFydC5zdWJzdHJpbmcoMSksIDgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGMxID09PSAndScgfHwgYzEgPT09ICd4JykgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGNoYXJzZXRQYXJ0LnN1YnN0cmluZygyKSwgMTYpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGNoYXJzZXRQYXJ0LmNoYXJDb2RlQXQoMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGVuY29kZUVzY2FwZShjaGFyQ29kZSkgewogICAgICAgICAgICBpZiAoY2hhckNvZGUgPCAweDIwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGNoYXJDb2RlIDwgMHgxMCA/ICdcXHgwJyA6ICdcXHgnKSArIGNoYXJDb2RlLnRvU3RyaW5nKDE2KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgY2ggPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKTsKICAgICAgICAgICAgcmV0dXJuIChjaCA9PT0gJ1xcJyB8fCBjaCA9PT0gJy0nIHx8IGNoID09PSAnXScgfHwgY2ggPT09ICdeJykgPyAiXFwiICsgY2ggOiBjaDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhc2VGb2xkQ2hhcnNldChjaGFyU2V0KSB7CiAgICAgICAgICAgIHZhciBjaGFyc2V0UGFydHMgPSBjaGFyU2V0LnN1YnN0cmluZygxLCBjaGFyU2V0Lmxlbmd0aCAtIDEpLm1hdGNoKG5ldyBSZWdFeHAoJ1xcXFx1WzAtOUEtRmEtZl17NH0nCiAgICAgICAgICAgICAgICArICd8XFxcXHhbMC05QS1GYS1mXXsyfScKICAgICAgICAgICAgICAgICsgJ3xcXFxcWzAtM11bMC03XXswLDJ9JwogICAgICAgICAgICAgICAgKyAnfFxcXFxbMC03XXsxLDJ9JwogICAgICAgICAgICAgICAgKyAnfFxcXFxbXFxzXFxTXScKICAgICAgICAgICAgICAgICsgJ3wtJwogICAgICAgICAgICAgICAgKyAnfFteLVxcXFxdJywgJ2cnKSk7CiAgICAgICAgICAgIHZhciByYW5nZXMgPSBbXTsKICAgICAgICAgICAgdmFyIGludmVyc2UgPSBjaGFyc2V0UGFydHNbMF0gPT09ICdeJzsKICAgICAgICAgICAgdmFyIG91dCA9IFsnWyddOwogICAgICAgICAgICBpZiAoaW52ZXJzZSkgewogICAgICAgICAgICAgICAgb3V0LnB1c2goJ14nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBpID0gaW52ZXJzZSA/IDEgOiAwLCBuID0gY2hhcnNldFBhcnRzLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgICAgICAgICAgdmFyIHAgPSBjaGFyc2V0UGFydHNbaV07CiAgICAgICAgICAgICAgICBpZiAoL1xcW2Jkc3ddL2kudGVzdChwKSkgewogICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKHApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBkZWNvZGVFc2NhcGUocCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZDsKICAgICAgICAgICAgICAgICAgICBpZiAoaSArIDIgPCBuICYmICctJyA9PT0gY2hhcnNldFBhcnRzW2kgKyAxXSkgewogICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBkZWNvZGVFc2NhcGUoY2hhcnNldFBhcnRzW2kgKyAyXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBzdGFydDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goW3N0YXJ0LCBlbmRdKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIShlbmQgPCA2NSB8fCBzdGFydCA+IDEyMikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW5kIDwgNjUgfHwgc3RhcnQgPiA5MCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKFtNYXRoLm1heCg2NSwgc3RhcnQpIHwgMzIsIE1hdGgubWluKGVuZCwgOTApIHwgMzJdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlbmQgPCA5NyB8fCBzdGFydCA+IDEyMikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKFtNYXRoLm1heCg5Nywgc3RhcnQpICYgfjMyLCBNYXRoLm1pbihlbmQsIDEyMikgJiB+MzJdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByYW5nZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuIChhWzBdIC0gYlswXSkgfHwgKGJbMV0gLSBhWzFdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBjb25zb2xpZGF0ZWRSYW5nZXMgPSBbXTsKICAgICAgICAgICAgdmFyIGxhc3RSYW5nZSA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldOwogICAgICAgICAgICAgICAgaWYgKHJhbmdlWzBdIDw9IGxhc3RSYW5nZVsxXSArIDEpIHsKICAgICAgICAgICAgICAgICAgICBsYXN0UmFuZ2VbMV0gPSBNYXRoLm1heChsYXN0UmFuZ2VbMV0sIHJhbmdlWzFdKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29saWRhdGVkUmFuZ2VzLnB1c2gobGFzdFJhbmdlID0gcmFuZ2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29uc29saWRhdGVkUmFuZ2VzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSBjb25zb2xpZGF0ZWRSYW5nZXNbaV07CiAgICAgICAgICAgICAgICBvdXQucHVzaChlbmNvZGVFc2NhcGUocmFuZ2VbMF0pKTsKICAgICAgICAgICAgICAgIGlmIChyYW5nZVsxXSA+IHJhbmdlWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlWzFdICsgMSA+IHJhbmdlWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKCctJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKGVuY29kZUVzY2FwZShyYW5nZVsxXSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIG91dC5wdXNoKCddJyk7CiAgICAgICAgICAgIHJldHVybiBvdXQuam9pbignJyk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhbGxvd0FueXdoZXJlRm9sZENhc2VBbmRSZW51bWJlckdyb3VwcyhyZWdleCkgewogICAgICAgICAgICB2YXIgcGFydHMgPSByZWdleC5zb3VyY2UubWF0Y2gobmV3IFJlZ0V4cCgnKD86JwogICAgICAgICAgICAgICAgKyAnXFxbKD86W15cXHg1Q1xceDVEXXxcXFxcW1xcc1xcU10pKlxcXScKICAgICAgICAgICAgICAgICsgJ3xcXFxcdVtBLUZhLWYwLTldezR9JwogICAgICAgICAgICAgICAgKyAnfFxcXFx4W0EtRmEtZjAtOV17Mn0nCiAgICAgICAgICAgICAgICArICd8XFxcXFswLTldKycKICAgICAgICAgICAgICAgICsgJ3xcXFxcW151eDAtOV0nCiAgICAgICAgICAgICAgICArICd8XFwoXFw/WzohPV0nCiAgICAgICAgICAgICAgICArICd8W1xcKFxcKVxcXl0nCiAgICAgICAgICAgICAgICArICd8W15cXHg1QlxceDVDXFwoXFwpXFxeXSsnCiAgICAgICAgICAgICAgICArICcpJywgJ2cnKSk7CiAgICAgICAgICAgIHZhciBuID0gcGFydHMubGVuZ3RoOwogICAgICAgICAgICB2YXIgY2FwdHVyZWRHcm91cHMgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGdyb3VwSW5kZXggPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICAgICAgICB2YXIgcCA9IHBhcnRzW2ldOwogICAgICAgICAgICAgICAgaWYgKHAgPT09ICcoJykgewogICAgICAgICAgICAgICAgICAgICsrZ3JvdXBJbmRleDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ1xcJyA9PT0gcC5jaGFyQXQoMCkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVjaW1hbFZhbHVlID0gK3Auc3Vic3RyaW5nKDEpOwogICAgICAgICAgICAgICAgICAgIGlmIChkZWNpbWFsVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlY2ltYWxWYWx1ZSA8PSBncm91cEluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZEdyb3Vwc1tkZWNpbWFsVmFsdWVdID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0c1tpXSA9IGVuY29kZUVzY2FwZShkZWNpbWFsVmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY2FwdHVyZWRHcm91cHMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gY2FwdHVyZWRHcm91cHNbaV0pIHsKICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZEdyb3Vwc1tpXSA9ICsrY2FwdHVyZWRHcm91cEluZGV4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBncm91cEluZGV4ID0gMDsgaSA8IG47ICsraSkgewogICAgICAgICAgICAgICAgdmFyIHAgPSBwYXJ0c1tpXTsKICAgICAgICAgICAgICAgIGlmIChwID09PSAnKCcpIHsKICAgICAgICAgICAgICAgICAgICArK2dyb3VwSW5kZXg7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYXB0dXJlZEdyb3Vwc1tncm91cEluZGV4XSkgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJ0c1tpXSA9ICcoPzonOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ1xcJyA9PT0gcC5jaGFyQXQoMCkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVjaW1hbFZhbHVlID0gK3Auc3Vic3RyaW5nKDEpOwogICAgICAgICAgICAgICAgICAgIGlmIChkZWNpbWFsVmFsdWUgJiYgZGVjaW1hbFZhbHVlIDw9IGdyb3VwSW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFydHNbaV0gPSAnXFwnICsgY2FwdHVyZWRHcm91cHNbZGVjaW1hbFZhbHVlXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICAgICAgICAgIGlmICgnXicgPT09IHBhcnRzW2ldICYmICdeJyAhPT0gcGFydHNbaSArIDFdKSB7CiAgICAgICAgICAgICAgICAgICAgcGFydHNbaV0gPSAnJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmVnZXguaWdub3JlQ2FzZSAmJiBuZWVkVG9Gb2xkQ2FzZSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IHBhcnRzW2ldOwogICAgICAgICAgICAgICAgICAgIHZhciBjaDAgPSBwLmNoYXJBdCgwKTsKICAgICAgICAgICAgICAgICAgICBpZiAocC5sZW5ndGggPj0gMiAmJiBjaDAgPT09ICdbJykgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJ0c1tpXSA9IGNhc2VGb2xkQ2hhcnNldChwKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoMCAhPT0gJ1xcJykgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJ0c1tpXSA9IHAucmVwbGFjZSgvW2EtekEtWl0vZywgZnVuY3Rpb24gKGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2MgPSBjaC5jaGFyQ29kZUF0KDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdbJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2MgJiB+MzIsIGNjIHwgMzIpICsgJ10nOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJycpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJld3JpdHRlbiA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gcmVnZXhzLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgICAgICB2YXIgcmVnZXggPSByZWdleHNbaV07CiAgICAgICAgICAgIGlmIChyZWdleC5nbG9iYWwgfHwgcmVnZXgubXVsdGlsaW5lKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJycgKyByZWdleCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV3cml0dGVuLnB1c2goJyg/OicgKyBhbGxvd0FueXdoZXJlRm9sZENhc2VBbmRSZW51bWJlckdyb3VwcyhyZWdleCkgKyAnKScpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChyZXdyaXR0ZW4uam9pbignfCcpLCBpZ25vcmVDYXNlID8gJ2dpJyA6ICdnJyk7CiAgICB9CgogICAgZnVuY3Rpb24gZXh0cmFjdFNvdXJjZVNwYW5zKG5vZGUsIGlzUHJlZm9ybWF0dGVkKSB7CiAgICAgICAgdmFyIG5vY29kZSA9IC8oPzpefFxzKW5vY29kZSg/OlxzfCQpLzsKICAgICAgICB2YXIgY2h1bmtzID0gW107CiAgICAgICAgdmFyIGxlbmd0aCA9IDA7CiAgICAgICAgdmFyIHNwYW5zID0gW107CiAgICAgICAgdmFyIGsgPSAwOwoKICAgICAgICBmdW5jdGlvbiB3YWxrKG5vZGUpIHsKICAgICAgICAgICAgc3dpdGNoIChub2RlLm5vZGVUeXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vY29kZS50ZXN0KG5vZGUuY2xhc3NOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNoaWxkID0gbm9kZS5maXJzdENoaWxkOyBjaGlsZDsgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZykgewogICAgICAgICAgICAgICAgICAgICAgICB3YWxrKGNoaWxkKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVOYW1lID0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgIGlmICgnYnInID09PSBub2RlTmFtZSB8fCAnbGknID09PSBub2RlTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjaHVua3Nba10gPSAnXG4nOwogICAgICAgICAgICAgICAgICAgICAgICBzcGFuc1trIDw8IDFdID0gbGVuZ3RoKys7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5zWyhrKysgPDwgMSkgfCAxXSA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gbm9kZS5ub2RlVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNQcmVmb3JtYXR0ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1sgXHRcclxuXSsvZywgJyAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xyXG4/L2csICdcbicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rc1trXSA9IHRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5zW2sgPDwgMV0gPSBsZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCArPSB0ZXh0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgc3BhbnNbKGsrKyA8PCAxKSB8IDFdID0gbm9kZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHdhbGsobm9kZSk7CiAgICAgICAgcmV0dXJuIHtzb3VyY2VDb2RlOiBjaHVua3Muam9pbignJykucmVwbGFjZSgvXG4kLywgJycpLCBzcGFuczogc3BhbnN9OwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcGVuZERlY29yYXRpb25zKGJhc2VQb3MsIHNvdXJjZUNvZGUsIGxhbmdIYW5kbGVyLCBvdXQpIHsKICAgICAgICBpZiAoIXNvdXJjZUNvZGUpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgam9iID0ge3NvdXJjZUNvZGU6IHNvdXJjZUNvZGUsIGJhc2VQb3M6IGJhc2VQb3N9OwogICAgICAgIGxhbmdIYW5kbGVyKGpvYik7CiAgICAgICAgb3V0LnB1c2guYXBwbHkob3V0LCBqb2IuZGVjb3JhdGlvbnMpOwogICAgfQoKICAgIHZhciBub3RXcyA9IC9cUy87CgogICAgZnVuY3Rpb24gY2hpbGRDb250ZW50V3JhcHBlcihlbGVtZW50KSB7CiAgICAgICAgdmFyIHdyYXBwZXIgPSB1bmRlZmluZWQ7CiAgICAgICAgZm9yICh2YXIgYyA9IGVsZW1lbnQuZmlyc3RDaGlsZDsgYzsgYyA9IGMubmV4dFNpYmxpbmcpIHsKICAgICAgICAgICAgdmFyIHR5cGUgPSBjLm5vZGVUeXBlOwogICAgICAgICAgICB3cmFwcGVyID0gKHR5cGUgPT09IDEpID8gKHdyYXBwZXIgPyBlbGVtZW50IDogYykgOiAodHlwZSA9PT0gMykgPyAobm90V3MudGVzdChjLm5vZGVWYWx1ZSkgPyBlbGVtZW50IDogd3JhcHBlcikgOiB3cmFwcGVyOwogICAgICAgIH0KICAgICAgICByZXR1cm4gd3JhcHBlciA9PT0gZWxlbWVudCA/IHVuZGVmaW5lZCA6IHdyYXBwZXI7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlU2ltcGxlTGV4ZXIoc2hvcnRjdXRTdHlsZVBhdHRlcm5zLCBmYWxsdGhyb3VnaFN0eWxlUGF0dGVybnMpIHsKICAgICAgICB2YXIgc2hvcnRjdXRzID0ge307CiAgICAgICAgdmFyIHRva2VuaXplcjsKICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYWxsUGF0dGVybnMgPSBzaG9ydGN1dFN0eWxlUGF0dGVybnMuY29uY2F0KGZhbGx0aHJvdWdoU3R5bGVQYXR0ZXJucyk7CiAgICAgICAgICAgIHZhciBhbGxSZWdleHMgPSBbXTsKICAgICAgICAgICAgdmFyIHJlZ2V4S2V5cyA9IHt9OwogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGFsbFBhdHRlcm5zLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgICAgICAgICAgdmFyIHBhdHRlcm5QYXJ0cyA9IGFsbFBhdHRlcm5zW2ldOwogICAgICAgICAgICAgICAgdmFyIHNob3J0Y3V0Q2hhcnMgPSBwYXR0ZXJuUGFydHNbM107CiAgICAgICAgICAgICAgICBpZiAoc2hvcnRjdXRDaGFycykgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSBzaG9ydGN1dENoYXJzLmxlbmd0aDsgLS1jID49IDA7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0c1tzaG9ydGN1dENoYXJzLmNoYXJBdChjKV0gPSBwYXR0ZXJuUGFydHM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHJlZ2V4ID0gcGF0dGVyblBhcnRzWzFdOwogICAgICAgICAgICAgICAgdmFyIGsgPSAnJyArIHJlZ2V4OwogICAgICAgICAgICAgICAgaWYgKCFyZWdleEtleXMuaGFzT3duUHJvcGVydHkoaykpIHsKICAgICAgICAgICAgICAgICAgICBhbGxSZWdleHMucHVzaChyZWdleCk7CiAgICAgICAgICAgICAgICAgICAgcmVnZXhLZXlzW2tdID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBhbGxSZWdleHMucHVzaCgvW1wwLVx1ZmZmZl0vKTsKICAgICAgICAgICAgdG9rZW5pemVyID0gY29tYmluZVByZWZpeFBhdHRlcm5zKGFsbFJlZ2V4cyk7CiAgICAgICAgfSkoKTsKICAgICAgICB2YXIgblBhdHRlcm5zID0gZmFsbHRocm91Z2hTdHlsZVBhdHRlcm5zLmxlbmd0aDsKICAgICAgICB2YXIgZGVjb3JhdGUgPSBmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgICAgIHZhciBzb3VyY2VDb2RlID0gam9iLnNvdXJjZUNvZGUsIGJhc2VQb3MgPSBqb2IuYmFzZVBvczsKICAgICAgICAgICAgdmFyIGRlY29yYXRpb25zID0gW2Jhc2VQb3MsIFBSX1BMQUlOXTsKICAgICAgICAgICAgdmFyIHBvcyA9IDA7CiAgICAgICAgICAgIHZhciB0b2tlbnMgPSBzb3VyY2VDb2RlLm1hdGNoKHRva2VuaXplcikgfHwgW107CiAgICAgICAgICAgIHZhciBzdHlsZUNhY2hlID0ge307CiAgICAgICAgICAgIGZvciAodmFyIHRpID0gMCwgblRva2VucyA9IHRva2Vucy5sZW5ndGg7IHRpIDwgblRva2VuczsgKyt0aSkgewogICAgICAgICAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW3RpXTsKICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHN0eWxlQ2FjaGVbdG9rZW5dOwogICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gdm9pZCAwOwogICAgICAgICAgICAgICAgdmFyIGlzRW1iZWRkZWQ7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0eWxlID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIGlzRW1iZWRkZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm5QYXJ0cyA9IHNob3J0Y3V0c1t0b2tlbi5jaGFyQXQoMCldOwogICAgICAgICAgICAgICAgICAgIGlmIChwYXR0ZXJuUGFydHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB0b2tlbi5tYXRjaChwYXR0ZXJuUGFydHNbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHBhdHRlcm5QYXJ0c1swXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5QYXR0ZXJuczsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuUGFydHMgPSBmYWxsdGhyb3VnaFN0eWxlUGF0dGVybnNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHRva2VuLm1hdGNoKHBhdHRlcm5QYXJ0c1sxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHBhdHRlcm5QYXJ0c1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IFBSX1BMQUlOOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlzRW1iZWRkZWQgPSBzdHlsZS5sZW5ndGggPj0gNSAmJiAnbGFuZy0nID09PSBzdHlsZS5zdWJzdHJpbmcoMCwgNSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRW1iZWRkZWQgJiYgIShtYXRjaCAmJiB0eXBlb2YgbWF0Y2hbMV0gPT09ICdzdHJpbmcnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpc0VtYmVkZGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gUFJfU09VUkNFOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRW1iZWRkZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDYWNoZVt0b2tlbl0gPSBzdHlsZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgdG9rZW5TdGFydCA9IHBvczsKICAgICAgICAgICAgICAgIHBvcyArPSB0b2tlbi5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAoIWlzRW1iZWRkZWQpIHsKICAgICAgICAgICAgICAgICAgICBkZWNvcmF0aW9ucy5wdXNoKGJhc2VQb3MgKyB0b2tlblN0YXJ0LCBzdHlsZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBlbWJlZGRlZFNvdXJjZSA9IG1hdGNoWzFdOwogICAgICAgICAgICAgICAgICAgIHZhciBlbWJlZGRlZFNvdXJjZVN0YXJ0ID0gdG9rZW4uaW5kZXhPZihlbWJlZGRlZFNvdXJjZSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVtYmVkZGVkU291cmNlRW5kID0gZW1iZWRkZWRTb3VyY2VTdGFydCArIGVtYmVkZGVkU291cmNlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hbMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW1iZWRkZWRTb3VyY2VFbmQgPSB0b2tlbi5sZW5ndGggLSBtYXRjaFsyXS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGVtYmVkZGVkU291cmNlU3RhcnQgPSBlbWJlZGRlZFNvdXJjZUVuZCAtIGVtYmVkZGVkU291cmNlLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGxhbmcgPSBzdHlsZS5zdWJzdHJpbmcoNSk7CiAgICAgICAgICAgICAgICAgICAgYXBwZW5kRGVjb3JhdGlvbnMoYmFzZVBvcyArIHRva2VuU3RhcnQsIHRva2VuLnN1YnN0cmluZygwLCBlbWJlZGRlZFNvdXJjZVN0YXJ0KSwgZGVjb3JhdGUsIGRlY29yYXRpb25zKTsKICAgICAgICAgICAgICAgICAgICBhcHBlbmREZWNvcmF0aW9ucyhiYXNlUG9zICsgdG9rZW5TdGFydCArIGVtYmVkZGVkU291cmNlU3RhcnQsIGVtYmVkZGVkU291cmNlLCBsYW5nSGFuZGxlckZvckV4dGVuc2lvbihsYW5nLCBlbWJlZGRlZFNvdXJjZSksIGRlY29yYXRpb25zKTsKICAgICAgICAgICAgICAgICAgICBhcHBlbmREZWNvcmF0aW9ucyhiYXNlUG9zICsgdG9rZW5TdGFydCArIGVtYmVkZGVkU291cmNlRW5kLCB0b2tlbi5zdWJzdHJpbmcoZW1iZWRkZWRTb3VyY2VFbmQpLCBkZWNvcmF0ZSwgZGVjb3JhdGlvbnMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGpvYi5kZWNvcmF0aW9ucyA9IGRlY29yYXRpb25zOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIGRlY29yYXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNvdXJjZURlY29yYXRvcihvcHRpb25zKSB7CiAgICAgICAgdmFyIHNob3J0Y3V0U3R5bGVQYXR0ZXJucyA9IFtdLCBmYWxsdGhyb3VnaFN0eWxlUGF0dGVybnMgPSBbXTsKICAgICAgICBpZiAob3B0aW9uc1sndHJpcGxlUXVvdGVkU3RyaW5ncyddKSB7CiAgICAgICAgICAgIHNob3J0Y3V0U3R5bGVQYXR0ZXJucy5wdXNoKFtQUl9TVFJJTkcsIC9eKD86XCdcJ1wnKD86W15cJ1xcXXxcXFtcc1xTXXxcJ3sxLDJ9KD89W15cJ10pKSooPzpcJ1wnXCd8JCl8XCJcIlwiKD86W15cIlxcXXxcXFtcc1xTXXxcInsxLDJ9KD89W15cIl0pKSooPzpcIlwiXCJ8JCl8XCcoPzpbXlxcXCddfFxcW1xzXFNdKSooPzpcJ3wkKXxcIig/OlteXFxcIl18XFxbXHNcU10pKig/OlwifCQpKS8sIG51bGwsICdcJyInXSk7CiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zWydtdWx0aUxpbmVTdHJpbmdzJ10pIHsKICAgICAgICAgICAgc2hvcnRjdXRTdHlsZVBhdHRlcm5zLnB1c2goW1BSX1NUUklORywgL14oPzpcJyg/OlteXFxcJ118XFxbXHNcU10pKig/OlwnfCQpfFwiKD86W15cXFwiXXxcXFtcc1xTXSkqKD86XCJ8JCl8XGAoPzpbXlxcXGBdfFxcW1xzXFNdKSooPzpcYHwkKSkvLCBudWxsLCAnXCciYCddKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzaG9ydGN1dFN0eWxlUGF0dGVybnMucHVzaChbUFJfU1RSSU5HLCAvXig/OlwnKD86W15cXFwnXHJcbl18XFwuKSooPzpcJ3wkKXxcIig/OlteXFxcIlxyXG5dfFxcLikqKD86XCJ8JCkpLywgbnVsbCwgJyJcJyddKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9wdGlvbnNbJ3ZlcmJhdGltU3RyaW5ncyddKSB7CiAgICAgICAgICAgIGZhbGx0aHJvdWdoU3R5bGVQYXR0ZXJucy5wdXNoKFtQUl9TVFJJTkcsIC9eQFwiKD86W15cIl18XCJcIikqKD86XCJ8JCkvLCBudWxsXSk7CiAgICAgICAgfQogICAgICAgIHZhciBoYyA9IG9wdGlvbnNbJ2hhc2hDb21tZW50cyddOwogICAgICAgIGlmIChoYykgewogICAgICAgICAgICBpZiAob3B0aW9uc1snY1N0eWxlQ29tbWVudHMnXSkgewogICAgICAgICAgICAgICAgaWYgKGhjID4gMSkgewogICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0U3R5bGVQYXR0ZXJucy5wdXNoKFtQUl9DT01NRU5ULCAvXiMoPzojIyg/OlteI118Iyg/ISMjKSkqKD86IyMjfCQpfC4qKS8sIG51bGwsICcjJ10pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dFN0eWxlUGF0dGVybnMucHVzaChbUFJfQ09NTUVOVCwgL14jKD86KD86ZGVmaW5lfGUoPzpsfG5kKWlmfGVsc2V8ZXJyb3J8aWZuP2RlZnxpbmNsdWRlfGxpbmV8cHJhZ21hfHVuZGVmfHdhcm5pbmcpXGJ8W15cclxuXSopLywgbnVsbCwgJyMnXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmYWxsdGhyb3VnaFN0eWxlUGF0dGVybnMucHVzaChbUFJfU1RSSU5HLCAvXjwoPzooPzooPzpcLlwuXC8pKnxcLz8pKD86W1x3LV0rKD86XC9bXHctXSspKyk/W1x3LV0rXC5oKD86aHxwcHxcK1wrKT98W2Etel1cdyopPi8sIG51bGxdKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNob3J0Y3V0U3R5bGVQYXR0ZXJucy5wdXNoKFtQUl9DT01NRU5ULCAvXiNbXlxyXG5dKi8sIG51bGwsICcjJ10pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChvcHRpb25zWydjU3R5bGVDb21tZW50cyddKSB7CiAgICAgICAgICAgIGZhbGx0aHJvdWdoU3R5bGVQYXR0ZXJucy5wdXNoKFtQUl9DT01NRU5ULCAvXlwvXC9bXlxyXG5dKi8sIG51bGxdKTsKICAgICAgICAgICAgZmFsbHRocm91Z2hTdHlsZVBhdHRlcm5zLnB1c2goW1BSX0NPTU1FTlQsIC9eXC9cKltcc1xTXSo/KD86XCpcL3wkKS8sIG51bGxdKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9wdGlvbnNbJ3JlZ2V4TGl0ZXJhbHMnXSkgewogICAgICAgICAgICB2YXIgUkVHRVhfTElURVJBTCA9ICgnLyg/PVteLypdKScKICAgICAgICAgICAgKyAnKD86W14vXFx4NUJcXHg1Q10nCiAgICAgICAgICAgICsgJ3xcXHg1Q1tcXHNcXFNdJwogICAgICAgICAgICArICd8XFx4NUIoPzpbXlxceDVDXFx4NURdfFxceDVDW1xcc1xcU10pKig/OlxceDVEfCQpKSsnCiAgICAgICAgICAgICsgJy8nKTsKICAgICAgICAgICAgZmFsbHRocm91Z2hTdHlsZVBhdHRlcm5zLnB1c2goWydsYW5nLXJlZ2V4JywgbmV3IFJlZ0V4cCgnXicgKyBSRUdFWFBfUFJFQ0VERVJfUEFUVEVSTiArICcoJyArIFJFR0VYX0xJVEVSQUwgKyAnKScpXSk7CiAgICAgICAgfQogICAgICAgIHZhciB0eXBlcyA9IG9wdGlvbnNbJ3R5cGVzJ107CiAgICAgICAgaWYgKHR5cGVzKSB7CiAgICAgICAgICAgIGZhbGx0aHJvdWdoU3R5bGVQYXR0ZXJucy5wdXNoKFtQUl9UWVBFLCB0eXBlc10pOwogICAgICAgIH0KICAgICAgICB2YXIga2V5d29yZHMgPSAoIiIgKyBvcHRpb25zWydrZXl3b3JkcyddKS5yZXBsYWNlKC9eIHwgJC9nLCAnJyk7CiAgICAgICAgaWYgKGtleXdvcmRzLmxlbmd0aCkgewogICAgICAgICAgICBmYWxsdGhyb3VnaFN0eWxlUGF0dGVybnMucHVzaChbUFJfS0VZV09SRCwgbmV3IFJlZ0V4cCgnXig/OicgKyBrZXl3b3Jkcy5yZXBsYWNlKC9bXHMsXSsvZywgJ3wnKSArICcpXFxiJyksIG51bGxdKTsKICAgICAgICB9CiAgICAgICAgc2hvcnRjdXRTdHlsZVBhdHRlcm5zLnB1c2goW1BSX1BMQUlOLCAvXlxzKy8sIG51bGwsICcgXHJcblx0XHhBMCddKTsKICAgICAgICB2YXIgcHVuY3R1YXRpb24gPSAvXi5bXlxzXHdcLiRAXCdcIlxgXC9cXF0qLzsKICAgICAgICBmYWxsdGhyb3VnaFN0eWxlUGF0dGVybnMucHVzaChbUFJfTElURVJBTCwgL15AW2Etel8kXVthLXpfJEAwLTldKi9pLCBudWxsXSwgW1BSX1RZUEUsIC9eKD86W0BfXT9bQS1aXStbYS16XVtBLVphLXpfJEAwLTldKnxcdytfdFxiKS8sIG51bGxdLCBbUFJfUExBSU4sIC9eW2Etel8kXVthLXpfJEAwLTldKi9pLCBudWxsXSwgW1BSX0xJVEVSQUwsIG5ldyBSZWdFeHAoJ14oPzonCiAgICAgICAgICAgICsgJzB4W2EtZjAtOV0rJwogICAgICAgICAgICArICd8KD86XFxkKD86X1xcZCspKlxcZCooPzpcXC5cXGQqKT98XFwuXFxkXFwrKScKICAgICAgICAgICAgKyAnKD86ZVsrXFwtXT9cXGQrKT8nCiAgICAgICAgICAgICsgJyknCiAgICAgICAgICAgICsgJ1thLXpdKicsICdpJyksIG51bGwsICcwMTIzNDU2Nzg5J10sIFtQUl9QTEFJTiwgL15cXFtcc1xTXT8vLCBudWxsXSwgW1BSX1BVTkNUVUFUSU9OLCBwdW5jdHVhdGlvbiwgbnVsbF0pOwogICAgICAgIHJldHVybiBjcmVhdGVTaW1wbGVMZXhlcihzaG9ydGN1dFN0eWxlUGF0dGVybnMsIGZhbGx0aHJvdWdoU3R5bGVQYXR0ZXJucyk7CiAgICB9CgogICAgdmFyIGRlY29yYXRlU291cmNlID0gc291cmNlRGVjb3JhdG9yKHsKICAgICAgICAna2V5d29yZHMnOiBBTExfS0VZV09SRFMsCiAgICAgICAgJ2hhc2hDb21tZW50cyc6IHRydWUsCiAgICAgICAgJ2NTdHlsZUNvbW1lbnRzJzogdHJ1ZSwKICAgICAgICAnbXVsdGlMaW5lU3RyaW5ncyc6IHRydWUsCiAgICAgICAgJ3JlZ2V4TGl0ZXJhbHMnOiB0cnVlCiAgICB9KTsKCiAgICBmdW5jdGlvbiBudW1iZXJMaW5lcyhub2RlLCBvcHRfc3RhcnRMaW5lTnVtLCBpc1ByZWZvcm1hdHRlZCkgewogICAgICAgIHZhciBub2NvZGUgPSAvKD86Xnxccylub2NvZGUoPzpcc3wkKS87CiAgICAgICAgdmFyIGxpbmVCcmVhayA9IC9cclxuP3xcbi87CiAgICAgICAgdmFyIGRvY3VtZW50ID0gbm9kZS5vd25lckRvY3VtZW50OwogICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgd2hpbGUgKG5vZGUuZmlyc3RDaGlsZCkgewogICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChub2RlLmZpcnN0Q2hpbGQpOwogICAgICAgIH0KICAgICAgICB2YXIgbGlzdEl0ZW1zID0gW2xpXTsKCiAgICAgICAgZnVuY3Rpb24gd2Fsayhub2RlKSB7CiAgICAgICAgICAgIHN3aXRjaCAobm9kZS5ub2RlVHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIGlmIChub2NvZGUudGVzdChub2RlLmNsYXNzTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICgnYnInID09PSBub2RlLm5vZGVOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrQWZ0ZXIobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNoaWxkID0gbm9kZS5maXJzdENoaWxkOyBjaGlsZDsgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FsayhjaGlsZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJlZm9ybWF0dGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gbm9kZS5ub2RlVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IHRleHQubWF0Y2gobGluZUJyZWFrKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RMaW5lID0gdGV4dC5zdWJzdHJpbmcoMCwgbWF0Y2guaW5kZXgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5ub2RlVmFsdWUgPSBmaXJzdExpbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFpbCA9IHRleHQuc3Vic3RyaW5nKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWlsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRhaWwpLCBub2RlLm5leHRTaWJsaW5nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrQWZ0ZXIobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0TGluZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYnJlYWtBZnRlcihsaW5lRW5kTm9kZSkgewogICAgICAgICAgICB3aGlsZSAoIWxpbmVFbmROb2RlLm5leHRTaWJsaW5nKSB7CiAgICAgICAgICAgICAgICBsaW5lRW5kTm9kZSA9IGxpbmVFbmROb2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICBpZiAoIWxpbmVFbmROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGJyZWFrTGVmdE9mKGxpbWl0LCBjb3B5KSB7CiAgICAgICAgICAgICAgICB2YXIgcmlnaHRTaWRlID0gY29weSA/IGxpbWl0LmNsb25lTm9kZShmYWxzZSkgOiBsaW1pdDsKICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBsaW1pdC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgaWYgKHBhcmVudCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRDbG9uZSA9IGJyZWFrTGVmdE9mKHBhcmVudCwgMSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHQgPSBsaW1pdC5uZXh0U2libGluZzsKICAgICAgICAgICAgICAgICAgICBwYXJlbnRDbG9uZS5hcHBlbmRDaGlsZChyaWdodFNpZGUpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNpYmxpbmcgPSBuZXh0OyBzaWJsaW5nOyBzaWJsaW5nID0gbmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gc2libGluZy5uZXh0U2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Q2xvbmUuYXBwZW5kQ2hpbGQoc2libGluZyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJpZ2h0U2lkZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGNvcGllZExpc3RJdGVtID0gYnJlYWtMZWZ0T2YobGluZUVuZE5vZGUubmV4dFNpYmxpbmcsIDApOwogICAgICAgICAgICBmb3IgKHZhciBwYXJlbnQ7IChwYXJlbnQgPSBjb3BpZWRMaXN0SXRlbS5wYXJlbnROb2RlKSAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDE7KSB7CiAgICAgICAgICAgICAgICBjb3BpZWRMaXN0SXRlbSA9IHBhcmVudDsKICAgICAgICAgICAgfQogICAgICAgICAgICBsaXN0SXRlbXMucHVzaChjb3BpZWRMaXN0SXRlbSk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RJdGVtcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB3YWxrKGxpc3RJdGVtc1tpXSk7CiAgICAgICAgfQogICAgICAgIGlmIChvcHRfc3RhcnRMaW5lTnVtID09PSAob3B0X3N0YXJ0TGluZU51bSB8IDApKSB7CiAgICAgICAgICAgIGxpc3RJdGVtc1swXS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgb3B0X3N0YXJ0TGluZU51bSk7CiAgICAgICAgfQogICAgICAgIHZhciBvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29sJyk7CiAgICAgICAgb2wuY2xhc3NOYW1lID0gJ2xpbmVudW1zJzsKICAgICAgICB2YXIgb2Zmc2V0ID0gTWF0aC5tYXgoMCwgKChvcHRfc3RhcnRMaW5lTnVtIC0gMSkpIHwgMCkgfHwgMDsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGxpc3RJdGVtcy5sZW5ndGg7IGkgPCBuOyArK2kpIHsKICAgICAgICAgICAgbGkgPSBsaXN0SXRlbXNbaV07CiAgICAgICAgICAgIGxpLmNsYXNzTmFtZSA9ICdMJyArICgoaSArIG9mZnNldCkgJSAxMCk7CiAgICAgICAgICAgIGlmICghbGkuZmlyc3RDaGlsZCkgewogICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1x4QTAnKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb2wuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgIH0KICAgICAgICBub2RlLmFwcGVuZENoaWxkKG9sKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWNvbWJpbmVUYWdzQW5kRGVjb3JhdGlvbnMoam9iKSB7CiAgICAgICAgdmFyIGlzSUU4T3JFYXJsaWVyID0gL1xiTVNJRVxzKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7CiAgICAgICAgaXNJRThPckVhcmxpZXIgPSBpc0lFOE9yRWFybGllciAmJiAraXNJRThPckVhcmxpZXJbMV0gPD0gODsKICAgICAgICB2YXIgbmV3bGluZVJlID0gL1xuL2c7CiAgICAgICAgdmFyIHNvdXJjZSA9IGpvYi5zb3VyY2VDb2RlOwogICAgICAgIHZhciBzb3VyY2VMZW5ndGggPSBzb3VyY2UubGVuZ3RoOwogICAgICAgIHZhciBzb3VyY2VJbmRleCA9IDA7CiAgICAgICAgdmFyIHNwYW5zID0gam9iLnNwYW5zOwogICAgICAgIHZhciBuU3BhbnMgPSBzcGFucy5sZW5ndGg7CiAgICAgICAgdmFyIHNwYW5JbmRleCA9IDA7CiAgICAgICAgdmFyIGRlY29yYXRpb25zID0gam9iLmRlY29yYXRpb25zOwogICAgICAgIHZhciBuRGVjb3JhdGlvbnMgPSBkZWNvcmF0aW9ucy5sZW5ndGg7CiAgICAgICAgdmFyIGRlY29yYXRpb25JbmRleCA9IDA7CiAgICAgICAgZGVjb3JhdGlvbnNbbkRlY29yYXRpb25zXSA9IHNvdXJjZUxlbmd0aDsKICAgICAgICB2YXIgZGVjUG9zLCBpOwogICAgICAgIGZvciAoaSA9IGRlY1BvcyA9IDA7IGkgPCBuRGVjb3JhdGlvbnM7KSB7CiAgICAgICAgICAgIGlmIChkZWNvcmF0aW9uc1tpXSAhPT0gZGVjb3JhdGlvbnNbaSArIDJdKSB7CiAgICAgICAgICAgICAgICBkZWNvcmF0aW9uc1tkZWNQb3MrK10gPSBkZWNvcmF0aW9uc1tpKytdOwogICAgICAgICAgICAgICAgZGVjb3JhdGlvbnNbZGVjUG9zKytdID0gZGVjb3JhdGlvbnNbaSsrXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGkgKz0gMjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBuRGVjb3JhdGlvbnMgPSBkZWNQb3M7CiAgICAgICAgZm9yIChpID0gZGVjUG9zID0gMDsgaSA8IG5EZWNvcmF0aW9uczspIHsKICAgICAgICAgICAgdmFyIHN0YXJ0UG9zID0gZGVjb3JhdGlvbnNbaV07CiAgICAgICAgICAgIHZhciBzdGFydERlYyA9IGRlY29yYXRpb25zW2kgKyAxXTsKICAgICAgICAgICAgdmFyIGVuZCA9IGkgKyAyOwogICAgICAgICAgICB3aGlsZSAoZW5kICsgMiA8PSBuRGVjb3JhdGlvbnMgJiYgZGVjb3JhdGlvbnNbZW5kICsgMV0gPT09IHN0YXJ0RGVjKSB7CiAgICAgICAgICAgICAgICBlbmQgKz0gMjsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWNvcmF0aW9uc1tkZWNQb3MrK10gPSBzdGFydFBvczsKICAgICAgICAgICAgZGVjb3JhdGlvbnNbZGVjUG9zKytdID0gc3RhcnREZWM7CiAgICAgICAgICAgIGkgPSBlbmQ7CiAgICAgICAgfQogICAgICAgIG5EZWNvcmF0aW9ucyA9IGRlY29yYXRpb25zLmxlbmd0aCA9IGRlY1BvczsKICAgICAgICB2YXIgc291cmNlTm9kZSA9IGpvYi5zb3VyY2VOb2RlOwogICAgICAgIHZhciBvbGREaXNwbGF5OwogICAgICAgIGlmIChzb3VyY2VOb2RlKSB7CiAgICAgICAgICAgIG9sZERpc3BsYXkgPSBzb3VyY2VOb2RlLnN0eWxlLmRpc3BsYXk7CiAgICAgICAgICAgIHNvdXJjZU5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGRlY29yYXRpb24gPSBudWxsOwogICAgICAgICAgICB3aGlsZSAoc3BhbkluZGV4IDwgblNwYW5zKSB7CiAgICAgICAgICAgICAgICB2YXIgc3BhblN0YXJ0ID0gc3BhbnNbc3BhbkluZGV4XTsKICAgICAgICAgICAgICAgIHZhciBzcGFuRW5kID0gc3BhbnNbc3BhbkluZGV4ICsgMl0gfHwgc291cmNlTGVuZ3RoOwogICAgICAgICAgICAgICAgdmFyIGRlY0VuZCA9IGRlY29yYXRpb25zW2RlY29yYXRpb25JbmRleCArIDJdIHx8IHNvdXJjZUxlbmd0aDsKICAgICAgICAgICAgICAgIHZhciBlbmQgPSBNYXRoLm1pbihzcGFuRW5kLCBkZWNFbmQpOwogICAgICAgICAgICAgICAgdmFyIHRleHROb2RlID0gc3BhbnNbc3BhbkluZGV4ICsgMV07CiAgICAgICAgICAgICAgICB2YXIgc3R5bGVkVGV4dDsKICAgICAgICAgICAgICAgIGlmICh0ZXh0Tm9kZS5ub2RlVHlwZSAhPT0gMSAmJiAoc3R5bGVkVGV4dCA9IHNvdXJjZS5zdWJzdHJpbmcoc291cmNlSW5kZXgsIGVuZCkpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSUU4T3JFYXJsaWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlZFRleHQgPSBzdHlsZWRUZXh0LnJlcGxhY2UobmV3bGluZVJlLCAnXHInKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGV4dE5vZGUubm9kZVZhbHVlID0gc3R5bGVkVGV4dDsKICAgICAgICAgICAgICAgICAgICB2YXIgZG9jdW1lbnQgPSB0ZXh0Tm9kZS5vd25lckRvY3VtZW50OwogICAgICAgICAgICAgICAgICAgIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gZGVjb3JhdGlvbnNbZGVjb3JhdGlvbkluZGV4ICsgMV07CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudE5vZGUgPSB0ZXh0Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHNwYW4sIHRleHROb2RlKTsKICAgICAgICAgICAgICAgICAgICBzcGFuLmFwcGVuZENoaWxkKHRleHROb2RlKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlSW5kZXggPCBzcGFuRW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5zW3NwYW5JbmRleCArIDFdID0gdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzb3VyY2Uuc3Vic3RyaW5nKGVuZCwgc3BhbkVuZCkpOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ZXh0Tm9kZSwgc3Bhbi5uZXh0U2libGluZyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc291cmNlSW5kZXggPSBlbmQ7CiAgICAgICAgICAgICAgICBpZiAoc291cmNlSW5kZXggPj0gc3BhbkVuZCkgewogICAgICAgICAgICAgICAgICAgIHNwYW5JbmRleCArPSAyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHNvdXJjZUluZGV4ID49IGRlY0VuZCkgewogICAgICAgICAgICAgICAgICAgIGRlY29yYXRpb25JbmRleCArPSAyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKHNvdXJjZU5vZGUpIHsKICAgICAgICAgICAgICAgIHNvdXJjZU5vZGUuc3R5bGUuZGlzcGxheSA9IG9sZERpc3BsYXk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgdmFyIGxhbmdIYW5kbGVyUmVnaXN0cnkgPSB7fTsKCiAgICBmdW5jdGlvbiByZWdpc3RlckxhbmdIYW5kbGVyKGhhbmRsZXIsIGZpbGVFeHRlbnNpb25zKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IGZpbGVFeHRlbnNpb25zLmxlbmd0aDsgLS1pID49IDA7KSB7CiAgICAgICAgICAgIHZhciBleHQgPSBmaWxlRXh0ZW5zaW9uc1tpXTsKICAgICAgICAgICAgaWYgKCFsYW5nSGFuZGxlclJlZ2lzdHJ5Lmhhc093blByb3BlcnR5KGV4dCkpIHsKICAgICAgICAgICAgICAgIGxhbmdIYW5kbGVyUmVnaXN0cnlbZXh0XSA9IGhhbmRsZXI7CiAgICAgICAgICAgIH0gZWxzZSBpZiAod2luWydjb25zb2xlJ10pIHsKICAgICAgICAgICAgICAgIGNvbnNvbGVbJ3dhcm4nXSgnY2Fubm90IG92ZXJyaWRlIGxhbmd1YWdlIGhhbmRsZXIgJXMnLCBleHQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGxhbmdIYW5kbGVyRm9yRXh0ZW5zaW9uKGV4dGVuc2lvbiwgc291cmNlKSB7CiAgICAgICAgaWYgKCEoZXh0ZW5zaW9uICYmIGxhbmdIYW5kbGVyUmVnaXN0cnkuaGFzT3duUHJvcGVydHkoZXh0ZW5zaW9uKSkpIHsKICAgICAgICAgICAgZXh0ZW5zaW9uID0gL15ccyo8Ly50ZXN0KHNvdXJjZSkgPyAnZGVmYXVsdC1tYXJrdXAnIDogJ2RlZmF1bHQtY29kZSc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsYW5nSGFuZGxlclJlZ2lzdHJ5W2V4dGVuc2lvbl07CiAgICB9CgogICAgcmVnaXN0ZXJMYW5nSGFuZGxlcihkZWNvcmF0ZVNvdXJjZSwgWydkZWZhdWx0LWNvZGUnXSk7CiAgICByZWdpc3RlckxhbmdIYW5kbGVyKGNyZWF0ZVNpbXBsZUxleGVyKFtdLCBbW1BSX1BMQUlOLCAvXltePD9dKy9dLCBbUFJfREVDTEFSQVRJT04sIC9ePCFcd1tePl0qKD86PnwkKS9dLCBbUFJfQ09NTUVOVCwgL148XCEtLVtcc1xTXSo/KD86LVwtPnwkKS9dLCBbJ2xhbmctJywgL148XD8oW1xzXFNdKz8pKD86XD8+fCQpL10sIFsnbGFuZy0nLCAvXjwlKFtcc1xTXSs/KSg/OiU+fCQpL10sIFtQUl9QVU5DVFVBVElPTiwgL14oPzo8WyU/XXxbJT9dPikvXSwgWydsYW5nLScsIC9ePHhtcFxiW14+XSo+KFtcc1xTXSs/KTxcL3htcFxiW14+XSo+L2ldLCBbJ2xhbmctanMnLCAvXjxzY3JpcHRcYltePl0qPihbXHNcU10qPykoPFwvc2NyaXB0XGJbXj5dKj4pL2ldLCBbJ2xhbmctY3NzJywgL148c3R5bGVcYltePl0qPihbXHNcU10qPykoPFwvc3R5bGVcYltePl0qPikvaV0sIFsnbGFuZy1pbi50YWcnLCAvXig8XC8/W2Etel1bXjw+XSo+KS9pXV0pLCBbJ2RlZmF1bHQtbWFya3VwJywgJ2h0bScsICdodG1sJywgJ214bWwnLCAneGh0bWwnLCAneG1sJywgJ3hzbCddKTsKICAgIHJlZ2lzdGVyTGFuZ0hhbmRsZXIoY3JlYXRlU2ltcGxlTGV4ZXIoW1tQUl9QTEFJTiwgL15bXHNdKy8sIG51bGwsICcgXHRcclxuJ10sIFtQUl9BVFRSSUJfVkFMVUUsIC9eKD86XCJbXlwiXSpcIj98XCdbXlwnXSpcJz8pLywgbnVsbCwgJ1wiXCcnXV0sIFtbUFJfVEFHLCAvXl48XC8/W2Etel0oPzpbXHcuOi1dKlx3KT98XC8/PiQvaV0sIFtQUl9BVFRSSUJfTkFNRSwgL14oPyFzdHlsZVtccz1dfG9uKVthLXpdKD86W1x3Oi1dKlx3KT8vaV0sIFsnbGFuZy11cS52YWwnLCAvXj1ccyooW14+XCdcIlxzXSooPzpbXj5cJ1wiXHNcL118XC8oPz1ccykpKS9dLCBbUFJfUFVOQ1RVQVRJT04sIC9eWz08PlwvXSsvXSwgWydsYW5nLWpzJywgL15vblx3K1xzKj1ccypcIihbXlwiXSspXCIvaV0sIFsnbGFuZy1qcycsIC9eb25cdytccyo9XHMqXCcoW15cJ10rKVwnL2ldLCBbJ2xhbmctanMnLCAvXm9uXHcrXHMqPVxzKihbXlwiXCc+XHNdKykvaV0sIFsnbGFuZy1jc3MnLCAvXnN0eWxlXHMqPVxzKlwiKFteXCJdKylcIi9pXSwgWydsYW5nLWNzcycsIC9ec3R5bGVccyo9XHMqXCcoW15cJ10rKVwnL2ldLCBbJ2xhbmctY3NzJywgL15zdHlsZVxzKj1ccyooW15cIlwnPlxzXSspL2ldXSksIFsnaW4udGFnJ10pOwogICAgcmVnaXN0ZXJMYW5nSGFuZGxlcihjcmVhdGVTaW1wbGVMZXhlcihbXSwgW1tQUl9BVFRSSUJfVkFMVUUsIC9eW1xzXFNdKy9dXSksIFsndXEudmFsJ10pOwogICAgcmVnaXN0ZXJMYW5nSGFuZGxlcihzb3VyY2VEZWNvcmF0b3IoewogICAgICAgICdrZXl3b3Jkcyc6IENQUF9LRVlXT1JEUywKICAgICAgICAnaGFzaENvbW1lbnRzJzogdHJ1ZSwKICAgICAgICAnY1N0eWxlQ29tbWVudHMnOiB0cnVlLAogICAgICAgICd0eXBlcyc6IENfVFlQRVMKICAgIH0pLCBbJ2MnLCAnY2MnLCAnY3BwJywgJ2N4eCcsICdjeWMnLCAnbSddKTsKICAgIHJlZ2lzdGVyTGFuZ0hhbmRsZXIoc291cmNlRGVjb3JhdG9yKHsna2V5d29yZHMnOiAnbnVsbCx0cnVlLGZhbHNlJ30pLCBbJ2pzb24nXSk7CiAgICByZWdpc3RlckxhbmdIYW5kbGVyKHNvdXJjZURlY29yYXRvcih7CiAgICAgICAgJ2tleXdvcmRzJzogQ1NIQVJQX0tFWVdPUkRTLAogICAgICAgICdoYXNoQ29tbWVudHMnOiB0cnVlLAogICAgICAgICdjU3R5bGVDb21tZW50cyc6IHRydWUsCiAgICAgICAgJ3ZlcmJhdGltU3RyaW5ncyc6IHRydWUsCiAgICAgICAgJ3R5cGVzJzogQ19UWVBFUwogICAgfSksIFsnY3MnXSk7CiAgICByZWdpc3RlckxhbmdIYW5kbGVyKHNvdXJjZURlY29yYXRvcih7J2tleXdvcmRzJzogSkFWQV9LRVlXT1JEUywgJ2NTdHlsZUNvbW1lbnRzJzogdHJ1ZX0pLCBbJ2phdmEnXSk7CiAgICByZWdpc3RlckxhbmdIYW5kbGVyKHNvdXJjZURlY29yYXRvcih7CiAgICAgICAgJ2tleXdvcmRzJzogU0hfS0VZV09SRFMsCiAgICAgICAgJ2hhc2hDb21tZW50cyc6IHRydWUsCiAgICAgICAgJ211bHRpTGluZVN0cmluZ3MnOiB0cnVlCiAgICB9KSwgWydic2gnLCAnY3NoJywgJ3NoJ10pOwogICAgcmVnaXN0ZXJMYW5nSGFuZGxlcihzb3VyY2VEZWNvcmF0b3IoewogICAgICAgICdrZXl3b3Jkcyc6IFBZVEhPTl9LRVlXT1JEUywKICAgICAgICAnaGFzaENvbW1lbnRzJzogdHJ1ZSwKICAgICAgICAnbXVsdGlMaW5lU3RyaW5ncyc6IHRydWUsCiAgICAgICAgJ3RyaXBsZVF1b3RlZFN0cmluZ3MnOiB0cnVlCiAgICB9KSwgWydjdicsICdweSddKTsKICAgIHJlZ2lzdGVyTGFuZ0hhbmRsZXIoc291cmNlRGVjb3JhdG9yKHsKICAgICAgICAna2V5d29yZHMnOiBQRVJMX0tFWVdPUkRTLAogICAgICAgICdoYXNoQ29tbWVudHMnOiB0cnVlLAogICAgICAgICdtdWx0aUxpbmVTdHJpbmdzJzogdHJ1ZSwKICAgICAgICAncmVnZXhMaXRlcmFscyc6IHRydWUKICAgIH0pLCBbJ3BlcmwnLCAncGwnLCAncG0nXSk7CiAgICByZWdpc3RlckxhbmdIYW5kbGVyKHNvdXJjZURlY29yYXRvcih7CiAgICAgICAgJ2tleXdvcmRzJzogUlVCWV9LRVlXT1JEUywKICAgICAgICAnaGFzaENvbW1lbnRzJzogdHJ1ZSwKICAgICAgICAnbXVsdGlMaW5lU3RyaW5ncyc6IHRydWUsCiAgICAgICAgJ3JlZ2V4TGl0ZXJhbHMnOiB0cnVlCiAgICB9KSwgWydyYiddKTsKICAgIHJlZ2lzdGVyTGFuZ0hhbmRsZXIoc291cmNlRGVjb3JhdG9yKHsKICAgICAgICAna2V5d29yZHMnOiBKU0NSSVBUX0tFWVdPUkRTLAogICAgICAgICdjU3R5bGVDb21tZW50cyc6IHRydWUsCiAgICAgICAgJ3JlZ2V4TGl0ZXJhbHMnOiB0cnVlCiAgICB9KSwgWydqcyddKTsKICAgIHJlZ2lzdGVyTGFuZ0hhbmRsZXIoc291cmNlRGVjb3JhdG9yKHsKICAgICAgICAna2V5d29yZHMnOiBDT0ZGRUVfS0VZV09SRFMsCiAgICAgICAgJ2hhc2hDb21tZW50cyc6IDMsCiAgICAgICAgJ2NTdHlsZUNvbW1lbnRzJzogdHJ1ZSwKICAgICAgICAnbXVsdGlsaW5lU3RyaW5ncyc6IHRydWUsCiAgICAgICAgJ3RyaXBsZVF1b3RlZFN0cmluZ3MnOiB0cnVlLAogICAgICAgICdyZWdleExpdGVyYWxzJzogdHJ1ZQogICAgfSksIFsnY29mZmVlJ10pOwogICAgcmVnaXN0ZXJMYW5nSGFuZGxlcihjcmVhdGVTaW1wbGVMZXhlcihbXSwgW1tQUl9TVFJJTkcsIC9eW1xzXFNdKy9dXSksIFsncmVnZXgnXSk7CiAgICBmdW5jdGlvbiBhcHBseURlY29yYXRvcihqb2IpIHsKICAgICAgICB2YXIgb3B0X2xhbmdFeHRlbnNpb24gPSBqb2IubGFuZ0V4dGVuc2lvbjsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgc291cmNlQW5kU3BhbnMgPSBleHRyYWN0U291cmNlU3BhbnMoam9iLnNvdXJjZU5vZGUsIGpvYi5wcmUpOwogICAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlQW5kU3BhbnMuc291cmNlQ29kZTsKICAgICAgICAgICAgam9iLnNvdXJjZUNvZGUgPSBzb3VyY2U7CiAgICAgICAgICAgIGpvYi5zcGFucyA9IHNvdXJjZUFuZFNwYW5zLnNwYW5zOwogICAgICAgICAgICBqb2IuYmFzZVBvcyA9IDA7CiAgICAgICAgICAgIGxhbmdIYW5kbGVyRm9yRXh0ZW5zaW9uKG9wdF9sYW5nRXh0ZW5zaW9uLCBzb3VyY2UpKGpvYik7CiAgICAgICAgICAgIHJlY29tYmluZVRhZ3NBbmREZWNvcmF0aW9ucyhqb2IpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgaWYgKHdpblsnY29uc29sZSddKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlWydsb2cnXShlICYmIGVbJ3N0YWNrJ10gPyBlWydzdGFjayddIDogZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcHJldHR5UHJpbnRPbmUoc291cmNlQ29kZUh0bWwsIG9wdF9sYW5nRXh0ZW5zaW9uLCBvcHRfbnVtYmVyTGluZXMpIHsKICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncHJlJyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IHNvdXJjZUNvZGVIdG1sOwogICAgICAgIGlmIChvcHRfbnVtYmVyTGluZXMpIHsKICAgICAgICAgICAgbnVtYmVyTGluZXMoY29udGFpbmVyLCBvcHRfbnVtYmVyTGluZXMsIHRydWUpOwogICAgICAgIH0KICAgICAgICB2YXIgam9iID0ge2xhbmdFeHRlbnNpb246IG9wdF9sYW5nRXh0ZW5zaW9uLCBudW1iZXJMaW5lczogb3B0X251bWJlckxpbmVzLCBzb3VyY2VOb2RlOiBjb250YWluZXIsIHByZTogMX07CiAgICAgICAgYXBwbHlEZWNvcmF0b3Ioam9iKTsKICAgICAgICByZXR1cm4gY29udGFpbmVyLmlubmVySFRNTDsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmV0dHlQcmludChvcHRfd2hlbkRvbmUpIHsKICAgICAgICBmdW5jdGlvbiBieVRhZ05hbWUodG4pIHsKICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRuKTsKICAgICAgICB9CgogICAgICAgIHZhciBjb2RlU2VnbWVudHMgPSBbYnlUYWdOYW1lKCdwcmUnKSwgYnlUYWdOYW1lKCdjb2RlJyksIGJ5VGFnTmFtZSgneG1wJyldOwogICAgICAgIHZhciBlbGVtZW50cyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZVNlZ21lbnRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBuID0gY29kZVNlZ21lbnRzW2ldLmxlbmd0aDsgaiA8IG47ICsraikgewogICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaChjb2RlU2VnbWVudHNbaV1bal0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvZGVTZWdtZW50cyA9IG51bGw7CiAgICAgICAgdmFyIGNsb2NrID0gRGF0ZTsKICAgICAgICBpZiAoIWNsb2NrWydub3cnXSkgewogICAgICAgICAgICBjbG9jayA9IHsKICAgICAgICAgICAgICAgICdub3cnOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICsobmV3IERhdGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB2YXIgayA9IDA7CiAgICAgICAgdmFyIHByZXR0eVByaW50aW5nSm9iOwogICAgICAgIHZhciBsYW5nRXh0ZW5zaW9uUmUgPSAvXGJsYW5nKD86dWFnZSk/LShbXHcuXSspKD8hXFMpLzsKICAgICAgICB2YXIgcHJldHR5UHJpbnRSZSA9IC9cYnByZXR0eXByaW50XGIvOwogICAgICAgIHZhciBwcmV0dHlQcmludGVkUmUgPSAvXGJwcmV0dHlwcmludGVkXGIvOwogICAgICAgIHZhciBwcmVmb3JtYXR0ZWRUYWdOYW1lUmUgPSAvcHJlfHhtcC9pOwogICAgICAgIHZhciBjb2RlUmUgPSAvXmNvZGUkL2k7CiAgICAgICAgdmFyIHByZUNvZGVYbXBSZSA9IC9eKD86cHJlfGNvZGV8eG1wKSQvaTsKCiAgICAgICAgZnVuY3Rpb24gZG9Xb3JrKCkgewogICAgICAgICAgICB2YXIgZW5kVGltZSA9ICh3aW5bJ1BSX1NIT1VMRF9VU0VfQ09OVElOVUFUSU9OJ10gPyBjbG9ja1snbm93J10oKSArIDI1MCA6IEluZmluaXR5KTsKICAgICAgICAgICAgZm9yICg7IGsgPCBlbGVtZW50cy5sZW5ndGggJiYgY2xvY2tbJ25vdyddKCkgPCBlbmRUaW1lOyBrKyspIHsKICAgICAgICAgICAgICAgIHZhciBjcyA9IGVsZW1lbnRzW2tdOwogICAgICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGNzLmNsYXNzTmFtZTsKICAgICAgICAgICAgICAgIGlmIChwcmV0dHlQcmludFJlLnRlc3QoY2xhc3NOYW1lKSAmJiAhcHJldHR5UHJpbnRlZFJlLnRlc3QoY2xhc3NOYW1lKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuZXN0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwID0gY3MucGFyZW50Tm9kZTsgcDsgcCA9IHAucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG4gPSBwLnRhZ05hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVDb2RlWG1wUmUudGVzdCh0bikgJiYgcC5jbGFzc05hbWUgJiYgcHJldHR5UHJpbnRSZS50ZXN0KHAuY2xhc3NOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVzdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghbmVzdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNzLmNsYXNzTmFtZSArPSAnIHByZXR0eXByaW50ZWQnOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ0V4dGVuc2lvbiA9IGNsYXNzTmFtZS5tYXRjaChsYW5nRXh0ZW5zaW9uUmUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcHBlcjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYW5nRXh0ZW5zaW9uICYmICh3cmFwcGVyID0gY2hpbGRDb250ZW50V3JhcHBlcihjcykpICYmIGNvZGVSZS50ZXN0KHdyYXBwZXIudGFnTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmdFeHRlbnNpb24gPSB3cmFwcGVyLmNsYXNzTmFtZS5tYXRjaChsYW5nRXh0ZW5zaW9uUmUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYW5nRXh0ZW5zaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nRXh0ZW5zaW9uID0gbGFuZ0V4dGVuc2lvblsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJlZm9ybWF0dGVkOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlZm9ybWF0dGVkVGFnTmFtZVJlLnRlc3QoY3MudGFnTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZvcm1hdHRlZCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFN0eWxlID0gY3NbJ2N1cnJlbnRTdHlsZSddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdoaXRlc3BhY2UgPSAoY3VycmVudFN0eWxlID8gY3VycmVudFN0eWxlWyd3aGl0ZVNwYWNlJ10gOiAoZG9jdW1lbnQuZGVmYXVsdFZpZXcgJiYgZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSkgPyBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGNzLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCd3aGl0ZS1zcGFjZScpIDogMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmb3JtYXR0ZWQgPSB3aGl0ZXNwYWNlICYmICdwcmUnID09PSB3aGl0ZXNwYWNlLnN1YnN0cmluZygwLCAzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluZU51bXMgPSBjcy5jbGFzc05hbWUubWF0Y2goL1xibGluZW51bXNcYig/OjooXGQrKSk/Lyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVOdW1zID0gbGluZU51bXMgPyBsaW5lTnVtc1sxXSAmJiBsaW5lTnVtc1sxXS5sZW5ndGggPyArbGluZU51bXNbMV0gOiB0cnVlIDogZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lTnVtcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyTGluZXMoY3MsIGxpbmVOdW1zLCBwcmVmb3JtYXR0ZWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHByZXR0eVByaW50aW5nSm9iID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ0V4dGVuc2lvbjogbGFuZ0V4dGVuc2lvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZU5vZGU6IGNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyTGluZXM6IGxpbmVOdW1zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlOiBwcmVmb3JtYXR0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlEZWNvcmF0b3IocHJldHR5UHJpbnRpbmdKb2IpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoayA8IGVsZW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChkb1dvcmssIDI1MCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0X3doZW5Eb25lKSB7CiAgICAgICAgICAgICAgICBvcHRfd2hlbkRvbmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZG9Xb3JrKCk7CiAgICB9CgogICAgdmFyIFBSID0gd2luWydQUiddID0gewogICAgICAgICdjcmVhdGVTaW1wbGVMZXhlcic6IGNyZWF0ZVNpbXBsZUxleGVyLAogICAgICAgICdyZWdpc3RlckxhbmdIYW5kbGVyJzogcmVnaXN0ZXJMYW5nSGFuZGxlciwKICAgICAgICAnc291cmNlRGVjb3JhdG9yJzogc291cmNlRGVjb3JhdG9yLAogICAgICAgICdQUl9BVFRSSUJfTkFNRSc6IFBSX0FUVFJJQl9OQU1FLAogICAgICAgICdQUl9BVFRSSUJfVkFMVUUnOiBQUl9BVFRSSUJfVkFMVUUsCiAgICAgICAgJ1BSX0NPTU1FTlQnOiBQUl9DT01NRU5ULAogICAgICAgICdQUl9ERUNMQVJBVElPTic6IFBSX0RFQ0xBUkFUSU9OLAogICAgICAgICdQUl9LRVlXT1JEJzogUFJfS0VZV09SRCwKICAgICAgICAnUFJfTElURVJBTCc6IFBSX0xJVEVSQUwsCiAgICAgICAgJ1BSX05PQ09ERSc6IFBSX05PQ09ERSwKICAgICAgICAnUFJfUExBSU4nOiBQUl9QTEFJTiwKICAgICAgICAnUFJfUFVOQ1RVQVRJT04nOiBQUl9QVU5DVFVBVElPTiwKICAgICAgICAnUFJfU09VUkNFJzogUFJfU09VUkNFLAogICAgICAgICdQUl9TVFJJTkcnOiBQUl9TVFJJTkcsCiAgICAgICAgJ1BSX1RBRyc6IFBSX1RBRywKICAgICAgICAnUFJfVFlQRSc6IFBSX1RZUEUsCiAgICAgICAgJ3ByZXR0eVByaW50T25lJzogd2luWydwcmV0dHlQcmludE9uZSddID0gcHJldHR5UHJpbnRPbmUsCiAgICAgICAgJ3ByZXR0eVByaW50Jzogd2luWydwcmV0dHlQcmludCddID0gcHJldHR5UHJpbnQKICAgIH07CiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmVbJ2FtZCddKSB7CiAgICAgICAgZGVmaW5lKCJnb29nbGUtY29kZS1wcmV0dGlmeSIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBQUjsKICAgICAgICB9KTsKICAgIH0KfSkoKTsKCi8qKgogKiDmoLnmja7kvKDlhaXnmoQkc3Jj5p2l6I635Y+WbWFya2Rvd27nmoTlhoXlrrnlubbovazkuLpodG1s5pi+56S65ZyoJGRlc2PlhYPntKDkuIsKICog5aaC5p6cJGRlc2PlhYPntKDkuLp1bmRlZmluZe+8jOWImeaYvuekuiRzcmPlhYPntKDkuK0KICogQHBhcmFtICRzcmMgbWFya2Rvd27lhoXlrrnnmoTovb3kvZMKICogQHBhcmFtICRkZXNjIOa4suafk+i/h+WQjm1hcmtkb3du5YaF5a6555qE6L295L2TCiAqLwp2YXIgbWFya2Rvd24gPSBmdW5jdGlvbiAoJHNyYywgJGRlc2MpIHsKCiAgICBpZiAoJGRlc2MgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgJGRlc2MgPSAkc3JjOwogICAgfQogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgdmFyIG1hcmtkb3duRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgkc3JjKTsKICAgIHZhciBodG1sRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgkZGVzYyk7CiAgICB2YXIgbWFya2Rvd24gPSBtYXJrZG93bkVsLmlubmVyVGV4dDsvL+azqOaEj+i/memHjOW/hemhu+aYr2lubmVyVGV4dO+8jOS9v+eUqEpxdWVyeeaXtu+8jOivt+S9v+eUqCQudGV4dCgpCgogICAgLy8gR2VuZXJhdGUgTWFya2Rvd24KICAgIHZhciBodG1sID0gbWFya2VkKG1hcmtkb3duKTsKICAgIGh0bWxFbC5pbm5lckhUTUwgPSBodG1sOwogICAgLy9jb25zb2xlLmxvZyhodG1sKTsKICAgIC8vIFByZXR0aWZ5CiAgICB2YXIgY29kZUVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjb2RlJyk7CiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb2RlRWxzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHsKICAgICAgICB2YXIgY29kZUVsID0gY29kZUVsc1tpXTsKICAgICAgICB2YXIgbGFuZyA9IGNvZGVFbC5jbGFzc05hbWU7CiAgICAgICAgY29kZUVsLmNsYXNzTmFtZSA9ICdwcmV0dHlwcmludCBsYW5nLScgKyBsYW5nOwogICAgfQogICAgcHJldHR5UHJpbnQoKTsKCiAgICAvLyBTdHlsZSB0YWJsZXMKICAgIHZhciB0YWJsZUVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0YWJsZScpOwogICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGFibGVFbHMubGVuZ3RoOyBpIDwgaWk7IGkrKykgewogICAgICAgIHZhciB0YWJsZUVsID0gdGFibGVFbHNbaV07CiAgICAgICAgdGFibGVFbC5jbGFzc05hbWUgPSAndGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1ib3JkZXJlZCc7CiAgICB9CiAgICAvLyBBbGwgZG9uZSAtIHNob3cgYm9keQogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5kaXNwbGF5ID0gJyc7Cgp9OwoKLyoqCiAqIOagueaNruS8oOWFpeeahCRkYXRh5L2c5Li6bWFya2Rvd27nmoTlhoXlrrnlubbovazkuLpodG1s5pi+56S65ZyoJGRlc2PlhYPntKDkuIsKICogQHBhcmFtICRkYXRhIG1hcmtkb3du5YaF5a65CiAqIEBwYXJhbSAkZGVzYyDmuLLmn5Pov4flkI5tYXJrZG93buWGheWuueeahOi9veS9kwogKi8KdmFyIG1hcmtkb3duRnJvbVRleHQgPSBmdW5jdGlvbiAoJGRhdGEsICRkZXNjKSB7CgogICAgLy8gR2VuZXJhdGUgTWFya2Rvd24KICAgIHZhciBodG1sID0gbWFya2VkKCRkYXRhKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCRkZXNjKS5pbm5lckhUTUwgPSBodG1sOwoKICAgIC8vIFByZXR0aWZ5CiAgICB2YXIgY29kZUVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjb2RlJyk7CiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb2RlRWxzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHsKICAgICAgICB2YXIgY29kZUVsID0gY29kZUVsc1tpXTsKICAgICAgICB2YXIgbGFuZyA9IGNvZGVFbC5jbGFzc05hbWU7CiAgICAgICAgY29kZUVsLmNsYXNzTmFtZSA9ICdwcmV0dHlwcmludCBsYW5nLScgKyBsYW5nOwogICAgfQogICAgcHJldHR5UHJpbnQoKTsKCiAgICAvLyBTdHlsZSB0YWJsZXMKICAgIHZhciB0YWJsZUVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0YWJsZScpOwogICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGFibGVFbHMubGVuZ3RoOyBpIDwgaWk7IGkrKykgewogICAgICAgIHZhciB0YWJsZUVsID0gdGFibGVFbHNbaV07CiAgICAgICAgdGFibGVFbC5jbGFzc05hbWUgPSAndGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1ib3JkZXJlZCc7CiAgICB9Cn07Cg=="),
		})
	}
	opts := internal.GetCLIOptions()

	if opts.Version {
		fmt.Printf("Current ver.: %s\n", revision)
		os.Exit(0)
	}

	if opts.WatchMode {
		fmt.Println("Starting in watch mode...")
		go makeBlog(opts)
		go internal.WatchForChangedFiles(func() { makeBlog(opts) })
		internal.RunDevelopmentWebserver()
	} else {
		fmt.Println("Starting...")
		makeBlog(opts)
	}
}

func makeBlog(opts internal.Opts) {
	start := time.Now()
	err := cmd.MakeBlog(opts)
	if err != nil {
		log.Fatalf("Can't make a blog: %v", err)
	}
	elapsed := time.Since(start)
	log.Printf("Done in %s", elapsed)
}
